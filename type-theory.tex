\input{preamble}

% OK, start here.
%
\input{chapter_modifications.tex}
\begin{document}

\title{Type Theory}

\maketitle

\phantomsection
\label{section-phantom}

This chapter contains material on type theory.

\ChapterTableOfContents

\section{Type Theory Basics}\label{section-type-theory-basics}
\subsection{Inference Rules}\label{subsection-inference-rules}
\begin{definition}{Inference Rules}{inference-rules}%
    An \index[type-theory]{inference rule}\textbf{inference rule} is written in the form
    \begin{webcompile}
        \proofspacing
        \begin{prooftree}
            \hypo{\mathcal{H}_{1}\quad\mathcal{H}_{2}\quad\ldots\quad\mathcal{H}_{n}}%
            \infer1[(name)]{\mathcal{C}}
        \end{prooftree}
        \proofspacing
    \end{webcompile}
    and represents a deduction going from a finite list $\mathcal{H}_{1}$, $\ldots$, $\mathcal{H}_{n}$ of \textbf{judgements} for the \textbf{premises} to a \textbf{conclusion} $\CatFont{C}$, which is itself a (single) judgement.
\end{definition}
\begin{example}{An Inference Rule for Function Types}{an-inference-rule-for-function-types}%
    The inference rule
    \[
        \inferrule{%
            {\color{OIvermillion}\Gamma}\mathbin{\vdash}{\color{OIblue}a\oftype A}%
            \quad%
            {\color{OIvermillion}\Gamma}\mathbin{\vdash}{\color{OIblue}f\oftype A\to B}%
        }{%
            {\color{OIvermillion}\Gamma}\mathbin{\vdash}{\color{OIblue}{f(a)\oftype B}}%
        }%
        \mrp{\,(\text{ev})}%
    \]%
    \begin{webcompile}%
        \proofspacing%
        \begin{prooftree}%
            \hypo{\context{\Gamma}{a\colon A}}%
            \hypo{\context{\Gamma}{f\colon A\to B}}%
            \infer1[(ev)]{\context{\Gamma}{f(a)\colon B}}%
        \end{prooftree}%
        \proofspacing%
    \end{webcompile}%
    works as follows. In the \emph{context} $\Gamma$, we start with:
    \begin{itemize}
        \item A term $a$ of type $A$;
        \item A term $f$ of type $A\to B$;
    \end{itemize}
    and then obtain a term $f(a)$ of type $B$.
\end{example}
\subsection{Contexts}\label{subsection-contexts}
\begin{definition}{Contexts}{contexts}%
    A \index[type-theory]{context}\textbf{context} is a finite list of \textbf{variable declarations}
    \begin{itemize}
        \item $a_{1}\oftype A_{1}$;
        \item $a_{2}\oftype A_{2}(x_{1})$;
        \item $\ldots$;
        \item $a_{k}\oftype A_{k}(x_{k-1})$;
    \end{itemize}
    such that, for each $1\leq k\leq n$, we may derive the judgement
    \[
        {\color{OIvermillion}{x\oftype A_{1},\ldots,x_{k-1}\oftype A_{k-1}(x_{1},\ldots,x_{k-2})}}%
        \mathbin{\vdash}%
        {\color{OIblue}{A_{k}(x_{1},\ldots,x_{k-1})\type}}%
    \]%
\end{definition}
\subsection{Type Families}\label{subsection-type-families}
\begin{definition}{Type Families and Sections}{type-families-and-sections}%
    Let $A$ be a type in a context $\Gamma$.
    \begin{enumerate}
        \item\label{type-families-and-sections-type-families}A \index[type-theory]{type family}\textbf{family of types over} $A$ in context $\Gamma$ is a type $B(x)$ in context $\Gamma,\,x\oftype A$.%
            %--- Begin Footnote ---%
            \footnote{%
                \SloganFont{Further Terminology: }We also say that $B(x)$ is a type \textbf{indexed} by $x\oftype A$ in context $\Gamma$.
            }%
            %---  End Footnote  ---%
        \item\label{type-families-and-sections-sections}A \index[type-theory]{section}\textbf{section} of a type family $B$ over $A$ in context $\Gamma$ is a term $b(x)$ of type $B(x)$ in context $\Gamma,\,x\oftype A$.%
            %--- Begin Footnote ---%
            \footnote{%
                \SloganFont{Further Terminology: }We also say that $b(x)$ is a term of type $B(x)$ \textbf{indexed} by $x\oftype A$ in context $\Gamma$.
                \par\vspace*{\TCBBoxCorrection}
            }%
            %---  End Footnote  ---%
    \end{enumerate}
\end{definition}
\begin{example}{Identity Types}{identity-types}%
    Identity types are introduced as
    \[
        \inferrule{%
            {\color{OIvermillion}\Gamma}\mathbin{\vdash}{\color{OIblue}{a\oftype A}}%
        }{%
            {\color{OIvermillion}\Gamma,\,x\oftype A}\mathbin{\vdash}{{\color{OIblue}a=x\type}}%
        }%
        \mrp{\,(\text{id}).}%
    \]%
    So $a=x$ is a type indexed over $x\oftype A$.
\end{example}
\subsection{Derivations}\label{subsection-derivations}
\begin{definition}{Derivations}{derivations}%
    A \index[type-theory]{derivation}\textbf{derivation} is a finite tree having rules of inference as nodes.
\end{definition}
\begin{example}{Changing Variables in Martin-Löf Type Theory}{changing-variables-in-martin-löf-type-theory}%
    The inference rule
    \[
        \inferrule{%
            {\color{OIvermillion}\Gamma,\,x\oftype A,\,\Delta}\mathbin{\vdash}{\color{OIblue}\mathcal{J}}%
        }{%
            {\color{OIvermillion}\Gamma,\,a\oftype A,\,\Delta[a/x]}\mathbin{\vdash}{\color{OIblue}\mathcal{J}[a/x]}%
        }%
        \,(\text{CV})%
    \]%
    admits the following derivation:
    \[
        \displaystyle\inferrule{%
            \displaystyle\inferrule{%
                {\color{OIvermillion}\Gamma}\mathbin{\vdash}{\color{OIblue}A\type}%
            }{%
                {\color{OIvermillion}\Gamma,\,a\oftype A}\mathbin{\vdash}{\color{OIblue}a\oftype A}%
            }%
            \,(\text{G})%
            \qquad
            \displaystyle\inferrule{%
                {\color{OIvermillion}\Gamma}\mathbin{\vdash}{\color{OIblue}A\type}%
                \quad%
                {\color{OIvermillion}\Gamma,\,x\oftype A}\mathbin{\vdash}{\color{OIblue}\mathcal{J}}%
            }{%
                {\color{OIvermillion}\Gamma,\,x\oftype A,\,a\oftype A,\,\Delta}\mathbin{\vdash}{\color{OIblue}\mathcal{J}}%
            }%
            \,(\text{W})%
        }{%
            {\color{OIvermillion}\Gamma,\,a\oftype A,\,\Delta[a/x]}\mathbin{\vdash}{\color{OIblue}\mathcal{J}[a/x]}%
        }%
        \,(\text{S}).%
    \]%
\end{example}
\begin{example}{Interchanging Variables in Martin-Löf Type Theory}{interchanging-variables-in-martin-löf-type-theory}%
    The inference rule
    \[
        \inferrule{%
            {\color{OIvermillion}\Gamma}\mathbin{\vdash}{\color{OIblue}B\type}%
            \quad%
            {\color{OIvermillion}\Gamma,\,x\oftype A,\,y\oftype B,\,\Delta}\mathbin{\vdash}{\color{OIblue}\mathcal{J}}%
        }{%
            {\color{OIvermillion}\Gamma,\,y\oftype B,\,x\oftype A,\,\Delta}\mathbin{\vdash}{\color{OIblue}\mathcal{J}}%
        }%
        \mrp{\,(\text{IV}).}%
    \]%
    admits the following derivation:
    \begin{envfootnotesize}
        \[
            \inferrule{%
                \displaystyle\inferrule{%
                    \displaystyle\inferrule{%
                        {\color{OIvermillion}\Gamma}\mathbin{\vdash}{\color{OIblue}B\type}%
                    }{%
                        {\color{OIvermillion}\Gamma,\,y\oftype B}\mathbin{\vdash}{\color{OIblue}y\oftype B}%
                    }%
                    \,(\text{G})%
                }{%
                    {\color{OIvermillion}\Gamma,\,y\oftype B,\,x\oftype A}\mathbin{\vdash}{\color{OIblue}y\oftype B}%
                }%
                \,(\text{W})%
                \qquad
                \displaystyle\inferrule{%
                    {\color{OIvermillion}\Gamma}\mathbin{\vdash}{\color{OIblue}B\type}%
                    \quad%
                    \displaystyle\inferrule{%
                        {\color{OIvermillion}\Gamma,\,x\oftype A,\,y\oftype B,\,\Delta}\mathbin{\vdash}{\color{OIblue}\mathcal{J}}%
                    }{%
                        {\color{OIvermillion}\Gamma,\,x\oftype A,\,y'\oftype B,\,\Delta[y'/y]}\mathbin{\vdash}{\color{OIblue}\mathcal{J}[y'/y]}%
                    }%
                    \,(\text{CV})%
                }{%
                    {\color{OIvermillion}\Gamma,\,y\oftype B,\,x\oftype A,\,y'\oftype B,\,\Delta[y'/y]}\mathbin{\vdash}{\color{OIblue}\mathcal{J}[y'/y]}%
                }%
                \,(\text{W})%
            }{%
                {\color{OIvermillion}\Gamma,\,y\oftype B,\,x\oftype A,\,\Delta}\mathbin{\vdash}{\color{OIblue}\mathcal{J}}%
            }%
            \mrp{\,(\text{S}).}%
        \]%
    \end{envfootnotesize}
\end{example}
\section{Martin-Löf Type Theory}\label{section-martin-löf-type-theory}
\subsection{Judgements}\label{subsection-martin-löf-type-theory-judgements}
\begin{definition}{Judgements}{martin-löf-type-theory-judgements}%
    Martin-Löf type theory has four kinds of \textbf{judgements}:
    \begin{enumerate}
        \item\label{martin-löf-type-theory-being-a-type}$A$ is a \textbf{type} in context $\Gamma$.
        \item\label{martin-löf-type-theory-being-judgementally-equal-types}$A$ and $B$ are \textbf{judgementally equal types} in context $\Gamma$.
        \item\label{martin-löf-type-theory-being-a-term}$a$ is a \textbf{term} of type $A$ in context $\Gamma$.
        \item\label{martin-löf-type-theory-being-judgementally-equal-terms}Terms $a$ and $b$ of type $A$ are \textbf{judgementally equal terms} of type $A$ in context $\Gamma$.
    \end{enumerate}
    These four judgements are written as follows:
    \begin{itemize}
        \item ${\color{OIvermillion}\Gamma}\mathbin{\vdash}{\color{OIblue}A\type}$.
        \item ${\color{OIvermillion}\Gamma}\mathbin{\vdash}{\color{OIblue}A\doteq B\type}$.
        \item ${\color{OIvermillion}\Gamma}\mathbin{\vdash}{\color{OIblue}a\oftype A}$.
        \item ${\color{OIvermillion}\Gamma}\mathbin{\vdash}{\color{OIblue}a\doteq b\oftype A}$.
    \end{itemize}
\end{definition}
\subsection{Inference Rules}\label{subsection-martin-löf-type-theory-inference-rules}
\begin{definition}{Inference Rules in Martin-Löf Type Theory \rmI}{inference-rules-in-martin-löf-type-theory-1}%
    Martin-Löf type theory has the following inference rules about the formation of contexts, types, and terms.
    \begin{enumerate}
        \item\label{inference-rules-in-martin-löf-type-theory-1-formation-of-dependent-types}\SloganFont{Formation of Dependent Types. }We have
            \[
                \inferrule{%
                    {\color{OIvermillion}\Gamma,\,x\oftype A}%
                    \mathbin{\vdash}%
                    {\color{OIblue}{B(x)\type}}%
                }{%
                    {\color{OIvermillion}\Gamma}%
                    \mathbin{\vdash}%
                    {\color{OIblue}A\type}%
                }.%
            \]%
        \item\label{inference-rules-in-martin-löf-type-theory-1-formation-of-judgemental-equality-of-types-1}\SloganFont{Formation of Judgemental Equality of Types \rmI. }We have
            \[
                \inferrule{%
                    {\color{OIvermillion}\Gamma}%
                    \mathbin{\vdash}%
                    {\color{OIblue}{A\doteq B\type}}%
                }{%
                    {\color{OIvermillion}\Gamma}%
                    \mathbin{\vdash}%
                    {\color{OIblue}A\type}%
                }.%
            \]%
        \item\label{inference-rules-in-martin-löf-type-theory-1-formation-of-judgemental-equality-of-types-1}\SloganFont{Formation of Judgemental Equality of Types \rmII. }We have
            \[
                \inferrule{%
                    {\color{OIvermillion}\Gamma}%
                    \mathbin{\vdash}%
                    {\color{OIblue}{A\doteq B\type}}%
                }{%
                    {\color{OIvermillion}\Gamma}%
                    \mathbin{\vdash}%
                    {\color{OIblue}B\type}%
                }.%
            \]%
        \item\label{inference-rules-in-martin-löf-type-theory-1-formation-of-terms}\SloganFont{Formation of Terms. }We have
            \[
                \inferrule{%
                    {\color{OIvermillion}\Gamma}%
                    \mathbin{\vdash}%
                    {\color{OIblue}{a\oftype A}}%
                }{%
                    {\color{OIvermillion}\Gamma}%
                    \mathbin{\vdash}%
                    {\color{OIblue}A\type}%
                }.%
            \]%
        \item\label{inference-rules-in-martin-löf-type-theory-1-formation-of-judgemental-equality-of-terms-1}\SloganFont{Formation of Judgemental Equality of Terms \rmI. }We have
            \[
                \inferrule{%
                    {\color{OIvermillion}\Gamma}%
                    \mathbin{\vdash}%
                    {\color{OIblue}{a\doteq b\oftype A}}%
                }{%
                    {\color{OIvermillion}\Gamma}%
                    \mathbin{\vdash}%
                    {\color{OIblue}a\oftype A}%
                }.%
            \]%
        \item\label{inference-rules-in-martin-löf-type-theory-1-formation-of-judgemental-equality-of-terms-3}\SloganFont{Formation of Judgemental Equality of Terms \rmII. }We have
            \[
                \inferrule{%
                    {\color{OIvermillion}\Gamma}%
                    \mathbin{\vdash}%
                    {\color{OIblue}{a\doteq b\oftype A}}%
                }{%
                    {\color{OIvermillion}\Gamma}%
                    \mathbin{\vdash}%
                    {\color{OIblue}b\oftype A}%
                }.%
            \]%
        %\item\label{inference-rules-in-martin-löf-type-theory-1-}\SloganFont{. }
    \end{enumerate}
\end{definition}
\begin{definition}{Inference Rules in Martin-Löf Type Theory \rmII}{inference-rules-in-martin-löf-type-theory-2}%
    Martin-Löf type theory has the following inference rules about judgemental equality of types, ensuring it behaves like an equivalence relation.
    \begin{enumerate}
        \item\label{inference-rules-in-martin-löf-type-theory-2-reflexivity}\SloganFont{Reflexivity. }We have
            \[
                \inferrule{{\color{OIvermillion}\Gamma}\mathbin{\vdash}{\color{OIblue}{A\type}}}{{\color{OIvermillion}\Gamma}\mathbin{\vdash}{\color{OIblue}A\doteq A\type}}.%
            \]%
        \item\label{inference-rules-in-martin-löf-type-theory-2-symmetry}\SloganFont{Symmetry. }We have
            \[
                \inferrule{{\color{OIvermillion}\Gamma}\mathbin{\vdash}{\color{OIblue}{A\doteq B\type}}}{{\color{OIvermillion}\Gamma}\mathbin{\vdash}{\color{OIblue}B\doteq A\type}}.%
            \]%
        \item\label{inference-rules-in-martin-löf-type-theory-2-transitivity}\SloganFont{Transitivity. }We have
            \[
                \inferrule{{\color{OIvermillion}\Gamma}\mathbin{\vdash}{\color{OIblue}{A\doteq B\type}}\quad{\color{OIvermillion}\Gamma}\mathbin{\vdash}{\color{OIblue}{B\doteq C\type}}}{{\color{OIvermillion}\Gamma}\mathbin{\vdash}{\color{OIblue}A\doteq C\type}}.%
            \]%
        %\item\label{inference-rules-in-martin-löf-type-theory-2-}\SloganFont{. }
    \end{enumerate}
\end{definition}
\begin{definition}{Inference Rules in Martin-Löf Type Theory \rmIII}{inference-rules-in-martin-löf-type-theory-3}%
    Martin-Löf type theory has the following inference rules about judgemental equality of terms, ensuring it behaves like an equivalence relation.
    \begin{enumerate}
        \item\label{inference-rules-in-martin-löf-type-theory-3-reflexivity}\SloganFont{Reflexivity. }We have
            \[
                \inferrule{{\color{OIvermillion}\Gamma}\mathbin{\vdash}{\color{OIblue}{a\oftype A\type}}}{{\color{OIvermillion}\Gamma}\mathbin{\vdash}{\color{OIblue}a\doteq a\oftype A}}.%
            \]%
        \item\label{inference-rules-in-martin-löf-type-theory-3-symmetry}\SloganFont{Symmetry. }We have
            \[
                \inferrule{{\color{OIvermillion}\Gamma}\mathbin{\vdash}{\color{OIblue}{a\doteq b\oftype A}}}{{\color{OIvermillion}\Gamma}\mathbin{\vdash}{\color{OIblue}b\doteq a\oftype A}}.%
            \]%
        \item\label{inference-rules-in-martin-löf-type-theory-3-transitivity}\SloganFont{Transitivity. }We have
            \[
                \inferrule{{\color{OIvermillion}\Gamma}\mathbin{\vdash}{\color{OIblue}{a\doteq b\oftype A}}\quad{\color{OIvermillion}\Gamma}\mathbin{\vdash}{\color{OIblue}{b\doteq c\oftype A}}}{{\color{OIvermillion}\Gamma}\mathbin{\vdash}{\color{OIblue}a\doteq c\oftype A}}.%
            \]%
        %\item\label{inference-rules-in-martin-löf-type-theory-3-}\SloganFont{. }
    \end{enumerate}
\end{definition}
\begin{definition}{Inference Rules in Martin-Löf Type Theory \rmIV}{inference-rules-in-martin-löf-type-theory-4}%
    Martin-Löf type theory has the following inference rules about \textbf{variable conversion}. They postulate we may convert a variable to a judgementally equal type/term.
    \begin{enumerate}
        \item\label{inference-rules-in-martin-löf-type-theory-4-variable-conversion-for-types}\SloganFont{Variable Conversion for Types. }We have%
            %--- Begin Footnote ---%
            \footnote{%
                \SloganFont{Slogan: }We may reindex a type $B(x)$ over $x\oftype A$ to $x\oftype A'$ when $A\doteq A'\type$.
            }%
            %---  End Footnote  ---%
            \[
                \inferrule{%
                    {\color{OIvermillion}\Gamma,\,x\oftype A,\,\Delta}\mathbin{\vdash}{\color{OIblue}C(x)\type}%
                    \quad%
                    {\color{OIvermillion}\Gamma}\mathbin{\vdash}{\color{OIblue}A\doteq B\type}%
                }{%
                    {\color{OIvermillion}\Gamma,\,x\oftype B,\,\Delta}\mathbin{\vdash}{\color{OIblue}C(x)\type}%
                }.%
            \]%
        \item\label{inference-rules-in-martin-löf-type-theory-4-variable-conversion-for-terms}\SloganFont{Variable Conversion for Terms. }We have%
            %--- Begin Footnote ---%
            \footnote{%
                \SloganFont{Slogan: }If we have a term $c(x)$ of type $C(x)$ indexed by $x\oftype A$ and $A\doteq B\type$, then $c(x)$ will have type $C(x)$ indexed by $x\oftype B$.
            }%
            %---  End Footnote  ---%
            \[
                \inferrule{%
                    {\color{OIvermillion}\Gamma,\,x\oftype A,\,\Delta}\mathbin{\vdash}{\color{OIblue}c(x)\oftype C(x)}%
                    \quad%
                    {\color{OIvermillion}\Gamma}\mathbin{\vdash}{\color{OIblue}A\doteq B\type}%
                }{%
                    {\color{OIvermillion}\Gamma,\,x\oftype B,\Delta}\mathbin{\vdash}{\color{OIblue}c(x)\oftype C(x)}%
                }.%
            \]%
        \item\label{inference-rules-in-martin-löf-type-theory-4-variable-conversion-for-judgemental-equality-of-types}\SloganFont{Variable Conversion for Judgemental Equality of Types. }We have%
            %--- Begin Footnote ---%
            \footnote{%
                \SloganFont{Slogan: }We may transfer a judgemental equality $C(x)\doteq C'(x)\type$ indexed over $x\oftype A$ to a judgemental equality $C(x)\doteq C'(x)\type$ indexed over $x\oftype B$ when $A\doteq B\type$.
            }%
            %---  End Footnote  ---%
            \[
                \inferrule{%
                    {\color{OIvermillion}\Gamma,\,x\oftype A,\,\Delta}\mathbin{\vdash}{\color{OIblue}C(x)\doteq C'(x)\type}%
                    \quad%
                    {\color{OIvermillion}\Gamma}\mathbin{\vdash}{\color{OIblue}A\doteq B\type}%
                }{%
                    {\color{OIvermillion}\Gamma,\,x\oftype B,\,\Delta}\mathbin{\vdash}{\color{OIblue}C(x)\doteq C'(x)\type}%
                }.%
            \]%
        \item\label{inference-rules-in-martin-löf-type-theory-4-variable-conversion-for-judgemental-equality-of-terms}\SloganFont{Variable Conversion for Judgemental Equality of Terms. }We have%
            %--- Begin Footnote ---%
            \footnote{%
                \SloganFont{Slogan: }We may transfer a judgemental equality $c(x)\doteq c'(x)\oftype C(x)$ indexed over $x\oftype A$ to a judgemental equality $c(x)\doteq c'(x)\oftype C(x)$ indexed over $x\oftype B$ when $A\doteq B\type$.
                \par\vspace*{\TCBBoxCorrection}
            }%
            %---  End Footnote  ---%
            \[
                \inferrule{%
                    {\color{OIvermillion}\Gamma,\,x\oftype A,\,\Delta}\mathbin{\vdash}{\color{OIblue}c(x)\doteq c'(x)\oftype C(x)}%
                    \quad%
                    {\color{OIvermillion}\Gamma}\mathbin{\vdash}{\color{OIblue}A\doteq B\type}%
                }{%
                    {\color{OIvermillion}\Gamma,\,x\oftype B,\,\Delta}\mathbin{\vdash}{\color{OIblue}c(x)\doteq c'(x)\oftype C(x)}%
                }.%
            \]%
    \end{enumerate}
    These rules may be summarised as
    \[
        \inferrule{%
            {\color{OIvermillion}\Gamma,\,x\oftype A,\,\Delta}\mathbin{\vdash}{\color{OIblue}\mathcal{J}}%
            \quad%
            {\color{OIvermillion}\Gamma}\mathbin{\vdash}{\color{OIblue}A\doteq B\type}%
        }{%
            {\color{OIvermillion}\Gamma,\,x\oftype B,\,\Delta}\mathbin{\vdash}{\color{OIblue}\mathcal{J}}%
        }%
        \mrp{\,(\text{VC})}%
    \]%
    for $\mathcal{J}$ a \textit{generic judgement}.
\end{definition}
\begin{proposition}{More Variable Conversion Rules for Martin-Löf Type Theory}{more-variable-conversion-rules-for-martin-löf-type-theory}%
    Martin-Löf type theory has the following additional variable conversion rules.
    \begin{enumerate}
        \item\label{more-variable-conversion-rules-for-martin-löf-type-theory-converting-terms}\SloganFont{Converting Terms. }We have
            \[
                \inferrule{%
                    {\color{OIvermillion}\Gamma}\mathbin{\vdash}{\color{OIblue}a\oftype A}%
                    \quad%
                    {\color{OIvermillion}\Gamma}\mathbin{\vdash}{\color{OIblue}A\doteq B\type}%
                }{%
                    {\color{OIvermillion}\Gamma}\mathbin{\vdash}{\color{OIblue}a\oftype B}%
                }.%
            \]%
        \item\label{more-variable-conversion-rules-for-martin-löf-type-theory-converting-judgemental-equality-for-terms}\SloganFont{Converting Judgemental Equality for Terms. }We have
            \[
                \inferrule{%
                    {\color{OIvermillion}\Gamma}\mathbin{\vdash}{\color{OIblue}a\doteq b\oftype A}%
                    \quad%
                    {\color{OIvermillion}\Gamma}\mathbin{\vdash}{\color{OIblue}A\doteq B\type}%
                }{%
                    {\color{OIvermillion}\Gamma}\mathbin{\vdash}{\color{OIblue}a\doteq b\oftype B}%
                }.%
            \]%
    \end{enumerate}
\end{proposition}
\begin{Proof}{Proof of \cref{more-variable-conversion-rules-for-martin-löf-type-theory}}%
    \FirstProofBox{\cref{more-variable-conversion-rules-for-martin-löf-type-theory-converting-terms}: Converting Terms}%
    The derivation
    \[
        \displaystyle\inferrule{%
            {\color{OIvermillion}\Gamma}\mathbin{\vdash}{\color{OIblue}a\oftype A}%
            \qquad
            \displaystyle\inferrule{%
                \displaystyle\inferrule{%
                    {\color{OIvermillion}\Gamma}\mathbin{\vdash}{\color{OIblue}A\doteq B\type}%
                }{%
                    \displaystyle\inferrule{%
                        {\color{OIvermillion}\Gamma}\mathbin{\vdash}{\color{OIblue}B\type}%
                    }{%
                        {\color{OIvermillion}\Gamma,\,x\oftype B}\mathbin{\vdash}{\color{OIblue}x\oftype B}%
                    }%
                    \,(\text{G})%
                }%
                \qquad%
                \displaystyle\inferrule{%
                    % --- START FIX ---
                    \vphantom{%
                        \displaystyle\inferrule{%
                            {\color{OIvermillion}\Gamma}\mathbin{\vdash}{\color{OIblue}A\doteq B\type}%
                        }{%
                            {\color{OIvermillion}\Gamma}\mathbin{\vdash}{\color{OIblue}B\type}%
                        }%
                    }%
                    % --- END FIX ---
                    {\color{OIvermillion}\Gamma}\mathbin{\vdash}{\color{OIblue}A\doteq B\type}%
                }{%
                    {\color{OIvermillion}\Gamma}\mathbin{\vdash}{\color{OIblue}B\doteq A\type}%
                }%
            }{%
                {\color{OIvermillion}\Gamma,\,x\oftype A}\mathbin{\vdash}{\color{OIblue}x\oftype B}%
            }%
        }{%
            {\color{OIvermillion}\Gamma}\mathbin{\vdash}{\color{OIblue}a\oftype B}%
        }%
        .%
    \]%
    This finishes the proof.

    \ProofBox{\cref{more-variable-conversion-rules-for-martin-löf-type-theory-converting-judgemental-equality-for-terms}: Converting Judgemental Equality for Terms}%
    The derivation
    \[
        \displaystyle\inferrule{%
            {\color{OIvermillion}\Gamma}\mathbin{\vdash}{\color{OIblue}a\oftype A}%
            \qquad
            \displaystyle\inferrule{%
                \displaystyle\inferrule{%
                    {\color{OIvermillion}\Gamma}\mathbin{\vdash}{\color{OIblue}A\doteq B\type}%
                }{%
                    \displaystyle\inferrule{%
                        {\color{OIvermillion}\Gamma}\mathbin{\vdash}{\color{OIblue}B\type}%
                    }{%
                        {\color{OIvermillion}\Gamma,\,x\oftype B}\mathbin{\vdash}{\color{OIblue}x\oftype B}%
                    }%
                    \,(\text{G})%
                }%
                \qquad%
                \displaystyle\inferrule{%
                    % --- START FIX ---
                    \vphantom{\displaystyle\inferrule{}{}}%
                    % --- END FIX ---
                    {\color{OIvermillion}\Gamma}\mathbin{\vdash}{\color{OIblue}A\doteq B\type}%
                }{%
                    {\color{OIvermillion}\Gamma}\mathbin{\vdash}{\color{OIblue}B\doteq A\type}%
                }%
            }{%
                {\color{OIvermillion}\Gamma,\,x\oftype A}\mathbin{\vdash}{\color{OIblue}x\oftype B}%
            }%
        }{%
            {\color{OIvermillion}\Gamma}\mathbin{\vdash}{\color{OIblue}a\oftype B}%
        }%
        .%
    \]%
\end{Proof}
\begin{definition}{Inference Rules in Martin-Löf Type Theory \rmV}{inference-rules-in-martin-löf-type-theory-5}%
    Martin-Löf type theory has the following inference rules about \textit{substitution}.%
    %--- Begin Footnote ---%
    \footnote{%
        \SloganFont{Further Terminology and Notation: }The type $B[a/x]$ is the \index[type-theory]{fibre}\textbf{fibre} of $B$ at $a$, and is also written $B(a)$.
    }%
    %---  End Footnote  ---%
    %--- Begin Footnote ---%
    \footnote{%
        \SloganFont{Further Terminology and Notation: }The term $b[a/x]$ is the \index[type-theory]{value}\textbf{value} of $b(x)$ at $a$, and is also written $b(a)$.
        \par\vspace*{\TCBBoxCorrection}
    }%
    %---  End Footnote  ---%
    \begin{enumerate}
        \item\label{inference-rules-in-martin-löf-type-theory-5-substitution-in-types}\SloganFont{Substitution in Types. }We have
            \[
                \inferrule{%
                    {\color{OIvermillion}\Gamma}\mathbin{\vdash}{\color{OIblue}a\oftype A}%
                    \quad%
                    {\color{OIvermillion}\Gamma,\,x\oftype A,\,\Delta}\mathbin{\vdash}{\color{OIblue}B(x)\type}%
                }{%
                    {\color{OIvermillion}\Gamma,\,\Delta[a/x]}\mathbin{\vdash}{\color{OIblue}B[a/x]\type}%
                }.%
            \]%
        \item\label{inference-rules-in-martin-löf-type-theory-5-substitution-in-terms}\SloganFont{Substitution in Terms. }We have
            \[
                \inferrule{%
                    {\color{OIvermillion}\Gamma}\mathbin{\vdash}{\color{OIblue}a\oftype A}%
                    \quad%
                    {\color{OIvermillion}\Gamma,\,x\oftype A,\,\Delta}\mathbin{\vdash}{\color{OIblue}b(x)\oftype B(x)}%
                }{%
                    {\color{OIvermillion}\Gamma,\,\Delta[a/x]}\mathbin{\vdash}{\color{OIblue}b[a/x]\oftype B[a/x]}%
                }.%
            \]%
        \item\label{inference-rules-in-martin-löf-type-theory-5-substitution-in-judgemental-equality-of-types}\SloganFont{Substitution in Judgemental Equality of Types. }We have
            \[
                \inferrule{%
                    {\color{OIvermillion}\Gamma}\mathbin{\vdash}{\color{OIblue}a\oftype A}%
                    \quad%
                    {\color{OIvermillion}\Gamma,\,x\oftype A,\,\Delta}\mathbin{\vdash}{\color{OIblue}B(x)\doteq C(x)\type}%
                }{%
                    {\color{OIvermillion}\Gamma,\,\Delta[a/x]}\mathbin{\vdash}{\color{OIblue}B[a/x]\doteq C[a/x]\type}%
                }.%
            \]%
        \item\label{inference-rules-in-martin-löf-type-theory-5-substitution-in-judgemental-equality-of-terms}\SloganFont{Substitution in Judgemental Equality of Terms. }We have
            \[
                \inferrule{%
                    {\color{OIvermillion}\Gamma}\mathbin{\vdash}{\color{OIblue}a\oftype A}%
                    \quad%
                    {\color{OIvermillion}\Gamma,\,x\oftype A,\,\Delta}\mathbin{\vdash}{\color{OIblue}b(x)\doteq b'(x)\oftype B(x)}%
                }{%
                    {\color{OIvermillion}\Gamma,\,\Delta[a/x]}\mathbin{\vdash}{\color{OIblue}b[a/x]\doteq b'[a/x]\oftype B[a/x]}%
                }.%
            \]%
        %\item\label{inference-rules-in-martin-löf-type-theory-5-}\SloganFont{. }
    \end{enumerate}
    These rules may be summarised as
    \[
        \inferrule{%
            {\color{OIvermillion}\Gamma}\mathbin{\vdash}{\color{OIblue}a\oftype A}%
            \quad%
            {\color{OIvermillion}\Gamma,\,x\oftype A,\,\Delta}\mathbin{\vdash}{\color{OIblue}\mathcal{J}}%
        }{%
            {\color{OIvermillion}\Gamma,\,\Delta[a/x]}\mathbin{\vdash}{\color{OIblue}\mathcal{J}[a/x]}%
        }%
        \mrp{\,(\text{S})}%
    \]%
    for $\mathcal{J}$ a generic judgement.
\end{definition}
\begin{definition}{Inference Rules in Martin-Löf Type Theory \rmVI}{inference-rules-in-martin-löf-type-theory-6}%
    Martin-Löf type theory has the following additional \say{congruence} rules about \textit{substitution}.
    \begin{enumerate}
        \item\label{inference-rules-in-martin-löf-type-theory-6-substitution-by-judgementally-equal-terms-for-types-1-types}\SloganFont{Substitution by Judgementally Equal Terms \rmI: Types. }We have
            \[
                \inferrule{%
                    {\color{OIvermillion}\Gamma}\mathbin{\vdash}{\color{OIblue}a\doteq b\oftype A}%
                    \quad%
                    {\color{OIvermillion}\Gamma,\,x\oftype A,\,\Delta}\mathbin{\vdash}{\color{OIblue}C\type}%
                }{%
                    {\color{OIvermillion}\Gamma,\,\Delta[a/x]}\mathbin{\vdash}{\color{OIblue}C[a/x]\doteq C[b/x]\type}%
                }.%
            \]%
        \item\label{inference-rules-in-martin-löf-type-theory-6-substitution-by-judgementally-equal-terms-for-types-2-terms}\SloganFont{Substitution by Judgementally Equal Terms \rmII: Terms. }We have
            \[
                \inferrule{%
                    {\color{OIvermillion}\Gamma}\mathbin{\vdash}{\color{OIblue}a\doteq b\oftype A}%
                    \quad%
                    {\color{OIvermillion}\Gamma,\,x\oftype A,\,\Delta}\mathbin{\vdash}{\color{OIblue}c\oftype C}%
                }{%
                    {\color{OIvermillion}\Gamma,\,\Delta[a/x]}\mathbin{\vdash}{\color{OIblue}c[a/x]\doteq c[b/x]\oftype C[a/x]}%
                }.%
            \]%
        %\item\label{inference-rules-in-martin-löf-type-theory-6-}\SloganFont{. }
    \end{enumerate}
\end{definition}
\begin{definition}{Inference Rules in Martin-Löf Type Theory \rmVII}{inference-rules-in-martin-löf-type-theory-7}%
    Martin-Löf type theory has the following rules about \textit{weakening}.%
    %--- Begin Footnote ---%
    \footnote{%
        \SloganFont{Further Terminology: }The type $B$ in context $\Gamma,\,x\oftype A$ is called the \textbf{constant family $B$} or the \textbf{trivial family $B$}.
        \par\vspace*{\TCBBoxCorrection}
    }%
    %---  End Footnote  ---%
    \begin{enumerate}
        \item\label{inference-rules-in-martin-löf-type-theory-7-weakening-for-types}\SloganFont{Weakening for Types. }We have
            \[
                \inferrule{%
                    {\color{OIvermillion}\Gamma}\mathbin{\vdash}{\color{OIblue}A\type}%
                    \quad%
                    {\color{OIvermillion}\Gamma}\mathbin{\vdash}{\color{OIblue}B(x)\type}%
                }{%
                    {\color{OIvermillion}\Gamma,\,a\oftype A}\mathbin{\vdash}{\color{OIblue}B(x)\type}%
                }.%
            \]%
        \item\label{inference-rules-in-martin-löf-type-theory-7-weakening-for-terms}\SloganFont{Weakening for Terms. }We have
            \[
                \inferrule{%
                    {\color{OIvermillion}\Gamma}\mathbin{\vdash}{\color{OIblue}A\type}%
                    \quad%
                    {\color{OIvermillion}\Gamma}\mathbin{\vdash}{\color{OIblue}b(x)\oftype B(x)}%
                }{%
                    {\color{OIvermillion}\Gamma,\,a\oftype A}\mathbin{\vdash}{\color{OIblue}b(x)\oftype B(x)}%
                }.%
            \]%
        \item\label{inference-rules-in-martin-löf-type-theory-7-weakening-for-judgemental-equality-of-types}\SloganFont{Weakening for Judgemental Equality of Types. }We have
            \[
                \inferrule{%
                    {\color{OIvermillion}\Gamma}\mathbin{\vdash}{\color{OIblue}A\type}%
                    \quad%
                    {\color{OIvermillion}\Gamma}\mathbin{\vdash}{\color{OIblue}B(x)\doteq C(x)\type}%
                }{%
                    {\color{OIvermillion}\Gamma,\,a\oftype A}\mathbin{\vdash}{\color{OIblue}B(x)\doteq C(x)\type}%
                }.%
            \]%
        \item\label{inference-rules-in-martin-löf-type-theory-7-weakening-for-judgemental-equality-of-terms}\SloganFont{Weakening for Judgemental Equality of Terms. }We have
            \[
                \inferrule{%
                    {\color{OIvermillion}\Gamma}\mathbin{\vdash}{\color{OIblue}A\type}%
                    \quad%
                    {\color{OIvermillion}\Gamma}\mathbin{\vdash}{\color{OIblue}b(x)\doteq b'(x)\oftype B(x)}%
                }{%
                    {\color{OIvermillion}\Gamma,\,a\oftype A}\mathbin{\vdash}{\color{OIblue}b(x)\doteq b'(x)\oftype B(x)}%
                }.%
            \]%
        %\item\label{inference-rules-in-martin-löf-type-theory-7-}\SloganFont{. }
    \end{enumerate}
    These rules may be summarised as
    \[
        \inferrule{%
            {\color{OIvermillion}\Gamma}\mathbin{\vdash}{\color{OIblue}A\type}%
            \quad%
            {\color{OIvermillion}\Gamma}\mathbin{\vdash}{\color{OIblue}\mathcal{J}}%
        }{%
            {\color{OIvermillion}\Gamma,\,a\oftype A,\,\Delta}\mathbin{\vdash}{\color{OIblue}\mathcal{J}}%
        }%
        \mrp{\,(\text{W})}%
    \]%
    for $\mathcal{J}$ a generic judgement.
\end{definition}
\begin{definition}{Inference Rules in Martin-Löf Type Theory \rmVIII}{inference-rules-in-martin-löf-type-theory-8}%
    Martin-Löf type theory has the following \textbf{variable rule} about the \textbf{generic element}:
    \[
        \inferrule{%
            {\color{OIvermillion}\Gamma}\mathbin{\vdash}{\color{OIblue}A\type}%
        }{%
            {\color{OIvermillion}\Gamma,\,x\oftype A}\mathbin{\vdash}{\color{OIblue}x\oftype A}%
        }%
        \mrp{\,(\text{G}).}%
    \]%
\end{definition}
\begin{appendices}
\input{ABSOLUTEPATH/chapters2.tex}
\end{appendices}
\end{document}
