\input{preamble}

% OK, start here.
%
\input{chapter_modifications.tex}
\begin{document}

\title{Type Theory}

\maketitle

\phantomsection
\label{section-phantom}

This chapter contains material on type theory.

\ChapterTableOfContents

\section{Type Theory Basics}\label{section-type-theory-basics}
\subsection{Inference Rules}\label{subsection-inference-rules}
\begin{definition}{Inference Rules}{inference-rules}%
    An \index[type-theory]{inference rule}\textbf{inference rule} is written in the form
    \begin{webprooftree}
        \begin{prooftree}
            \hypo{\mathcal{H}_{1}}%
            \hypo{\mathcal{H}_{2}}%
            \hypo{\ldots}%
            \hypo{\mathcal{H}_{n}}%
            \infer4[(name)]{\mathcal{C}}
        \end{prooftree}
    \end{webprooftree}
    and represents a deduction going from a finite list $\mathcal{H}_{1}$, $\ldots$, $\mathcal{H}_{n}$ of \textbf{judgements} for the \textbf{premises} to a \textbf{conclusion} $\CatFont{C}$, which is itself a (single) judgement.
\end{definition}
\begin{example}{An Inference Rule for Function Types}{an-inference-rule-for-function-types}%
    The inference rule
    \begin{webprooftree}%
        \begin{prooftree}%
            \hypo{\context{\Gamma}{a\oftype A}}%
            \hypo{\context{\Gamma}{f\oftype A\to B}}%
            \infer2[(ev2)]{\context{\Gamma}{f(a)\oftype B}}%
        \end{prooftree}%
    \end{webprooftree}%
    works as follows. In the \emph{context} $\Gamma$, we start with:
    \begin{itemize}
        \item A term $a$ of type $A$;
        \item A term $f$ of type $A\to B$;
    \end{itemize}
    and then obtain a term $f(a)$ of type $B$.
\end{example}
\subsection{Contexts}\label{subsection-contexts}
\begin{definition}{Contexts}{contexts}%
    A \index[type-theory]{context}\textbf{context} is a finite list of \textbf{variable declarations}
    \begin{itemize}
        \item $a_{1}\oftype A_{1}$;
        \item $a_{2}\oftype A_{2}(x_{1})$;
        \item $\ldots$;
        \item $a_{k}\oftype A_{k}(x_{k-1})$;
    \end{itemize}
    such that, for each $1\leq k\leq n$, we may derive the judgement
    \[
        \context{x\oftype A_{1},\ldots,x_{k-1}\oftype A_{k-1}(x_{1},\ldots,x_{k-2})}{A_{k}(x_{1},\ldots,x_{k-1})\type}.%
    \]%
\end{definition}
\subsection{Type Families}\label{subsection-type-families}
\begin{definition}{Type Families and Sections}{type-families-and-sections}%
    Let $A$ be a type in a context $\Gamma$.
    \begin{enumerate}
        \item\label{type-families-and-sections-type-families}A \index[type-theory]{type family}\textbf{family of types over} $A$ in context $\Gamma$ is a type $B(x)$ in context $\Gamma,\,x\oftype A$.%
            %--- Begin Footnote ---%
            \footnote{%
                \SloganFont{Further Terminology: }We also say that $B(x)$ is a type \textbf{indexed} by $x\oftype A$ in context $\Gamma$.
            }%
            %---  End Footnote  ---%
        \item\label{type-families-and-sections-sections}A \index[type-theory]{section}\textbf{section} of a type family $B$ over $A$ in context $\Gamma$ is a term $b(x)$ of type $B(x)$ in context $\Gamma,\,x\oftype A$.%
            %--- Begin Footnote ---%
            \footnote{%
                \SloganFont{Further Terminology: }We also say that $b(x)$ is a term of type $B(x)$ \textbf{indexed} by $x\oftype A$ in context $\Gamma$.
                \par\vspace*{\TCBBoxCorrection}
            }%
            %---  End Footnote  ---%
    \end{enumerate}
\end{definition}
\begin{example}{Identity Types}{identity-types}%
    Identity types are introduced as
    \begin{webprooftree}%
        \begin{prooftree}%
            \hypo{\context{\Gamma}{a\oftype A}}%
            \infer1[(id)]{\context{\Gamma,\,x\oftype A}{a=x\type}}%
        \end{prooftree}%
        .%
    \end{webprooftree}%
    So $a=x$ is a type indexed over $x\oftype A$.
\end{example}
\subsection{Derivations}\label{subsection-derivations}
\begin{definition}{Derivations}{derivations}%
    A \index[type-theory]{derivation}\textbf{derivation} is a finite tree having rules of inference as nodes.
\end{definition}
\begin{example}{Changing Variables in Martin-Löf Type Theory}{changing-variables-in-martin-löf-type-theory}%
    The inference rule
    \begin{webprooftree}%
        \begin{prooftree}%
            \hypo{\context{\Gamma,\,x\oftype A,\,\Delta}{\mathcal{J}}}%
            \infer1[(CV)]{\context{\Gamma,\,a\oftype A,\,\Delta[a/x]}{\mathcal{J}[a/x]}}%
        \end{prooftree}%
    \end{webprooftree}%
    admits the following derivation:
    \begin{webprooftree}%
        \begin{prooftree}%
            \hypo{\context{\Gamma}{A\type}}%
            \infer1[(G)]{\context{\Gamma,\,a\oftype A}{a\oftype A}}%
            \hypo{\context{\Gamma,\,x\oftype A}{\mathcal{J}}}%
            \infer1[(W)]{\context{\Gamma,\,x\oftype A,\,a\oftype A,\,\Delta}{\mathcal{J}}}%
            \infer2[(S)]{\context{\Gamma,\,a\oftype A,\,\Delta[a/x]}{\mathcal{J}[a/x]}}%
        \end{prooftree}%
        .%
    \end{webprooftree}%
\end{example}
\begin{example}{Interchanging Variables in Martin-Löf Type Theory}{interchanging-variables-in-martin-löf-type-theory}%
    The inference rule
    \begin{webprooftree}%
        \begin{prooftree}%
            \hypo{\context{\Gamma}{B\type}}%
            \hypo{\context{\Gamma,\,x\oftype A,\,y\oftype B,\,\Delta}{\mathcal{J}}}%
            \infer2[(IV)]{\context{\Gamma,\,y\oftype B,\,x\oftype A,\,\Delta}{\mathcal{J}}}%
        \end{prooftree}%
    \end{webprooftree}%
    admits the following derivation:
    \begin{webprooftree}%
        \begin{prooftree}%
            \hypo{\context{\Gamma}{B\type}}%
            \infer1[(G)]{\context{\Gamma,\,y\oftype B}{y\oftype B}}%
            \infer1[(W)]{\context{\Gamma,\,y\oftype B,\,x\oftype A}{y\oftype B}}%
            \hypo{\context{\Gamma}{B\type}}%
            \hypo{\context{\Gamma,\,x\oftype A,\,y\oftype B,\,\Delta}{\mathcal{J}}}%
            \infer1[(CV)]{\context{\Gamma,\,x\oftype A,\,y'\oftype B,\,\Delta[y'/y]}{\mathcal{J}[y'/y]}}%
            \infer2[(W)]{\context{\Gamma,\,y\oftype B,\,x\oftype A,\,y'\oftype B,\,\Delta[y'/y]}{\mathcal{J}[y'/y]}}%
            \infer2[(S)]{\context{\Gamma,\,y\oftype B,\,x\oftype A,\,\Delta}{\mathcal{J}}}
        \end{prooftree}%
        .%
    \end{webprooftree}%
\end{example}
\section{Martin-Löf Type Theory}\label{section-martin-löf-type-theory}
\subsection{Judgements}\label{subsection-martin-löf-type-theory-judgements}
\begin{definition}{Judgements}{martin-löf-type-theory-judgements}%
    Martin-Löf type theory has four kinds of \textbf{judgements}:
    \begin{enumerate}
        \item\label{martin-löf-type-theory-being-a-type}$A$ is a \textbf{type} in context $\Gamma$.
        \item\label{martin-löf-type-theory-being-judgementally-equal-types}$A$ and $B$ are \textbf{judgementally equal types} in context $\Gamma$.
        \item\label{martin-löf-type-theory-being-a-term}$a$ is a \textbf{term} of type $A$ in context $\Gamma$.
        \item\label{martin-löf-type-theory-being-judgementally-equal-terms}Terms $a$ and $b$ of type $A$ are \textbf{judgementally equal terms} of type $A$ in context $\Gamma$.
    \end{enumerate}
    These four judgements are written as follows:
    \begin{itemize}
        \item $\context{\Gamma}{A\type}$.
        \item $\context{\Gamma}{A\doteq B\type}$.
        \item $\context{\Gamma}{a\oftype A}$.
        \item $\context{\Gamma}{a\doteq b\oftype A}$.
    \end{itemize}
\end{definition}
\subsection{Inference Rules}\label{subsection-martin-löf-type-theory-inference-rules}
\begin{definition}{Inference Rules in Martin-Löf Type Theory \rmI}{inference-rules-in-martin-löf-type-theory-1}%
    Martin-Löf type theory has the following inference rules about the formation of contexts, types, and terms.
    \begin{enumerate}
        \item\label{inference-rules-in-martin-löf-type-theory-1-formation-of-dependent-types}\SloganFont{Formation of Dependent Types. }We have
            \begin{webprooftree}%
                \begin{prooftree}%
                    \hypo{\context{\Gamma,\,x\oftype A}{B(x)\type}}%
                    \infer1{\context{\Gamma}{A\type}}
                \end{prooftree}%
                .%
            \end{webprooftree}%
        \item\label{inference-rules-in-martin-löf-type-theory-1-formation-of-judgemental-equality-of-types-1}\SloganFont{Formation of Judgemental Equality of Types \rmI. }We have
            \begin{webprooftree}%
                \begin{prooftree}%
                    \hypo{\context{\Gamma}{A\doteq B\type}}%
                    \infer1{\context{\Gamma}{A\type}}
                \end{prooftree}%
                .%
            \end{webprooftree}%
        \item\label{inference-rules-in-martin-löf-type-theory-1-formation-of-judgemental-equality-of-types-1}\SloganFont{Formation of Judgemental Equality of Types \rmII. }We have
            \begin{webprooftree}%
                \begin{prooftree}%
                    \hypo{\context{\Gamma}{A\doteq B\type}}%
                    \infer1{\context{\Gamma}{B\type}}
                \end{prooftree}%
                .%
            \end{webprooftree}%
        \item\label{inference-rules-in-martin-löf-type-theory-1-formation-of-terms}\SloganFont{Formation of Terms. }We have
            \begin{webprooftree}%
                \begin{prooftree}%
                    \hypo{\context{\Gamma}{a\oftype A}}%
                    \infer1{\context{\Gamma}{A\type}}
                \end{prooftree}%
                .%
            \end{webprooftree}%
        \item\label{inference-rules-in-martin-löf-type-theory-1-formation-of-judgemental-equality-of-terms-1}\SloganFont{Formation of Judgemental Equality of Terms \rmI. }We have
            \begin{webprooftree}%
                \begin{prooftree}%
                    \hypo{\context{\Gamma}{a\doteq b\oftype A}}%
                    \infer1{\context{\Gamma}{a\oftype A}}
                \end{prooftree}%
                .%
            \end{webprooftree}%
        \item\label{inference-rules-in-martin-löf-type-theory-1-formation-of-judgemental-equality-of-terms-3}\SloganFont{Formation of Judgemental Equality of Terms \rmII. }We have
            \begin{webprooftree}%
                \begin{prooftree}%
                    \hypo{\context{\Gamma}{a\doteq b\oftype A}}%
                    \infer1{\context{\Gamma}{b\oftype A}}
                \end{prooftree}%
                .%
            \end{webprooftree}%
        %\item\label{inference-rules-in-martin-löf-type-theory-1-}\SloganFont{. }
    \end{enumerate}
\end{definition}
\begin{definition}{Inference Rules in Martin-Löf Type Theory \rmII}{inference-rules-in-martin-löf-type-theory-2}%
    Martin-Löf type theory has the following inference rules about judgemental equality of types, ensuring it behaves like an equivalence relation.
    \begin{enumerate}
        \item\label{inference-rules-in-martin-löf-type-theory-2-reflexivity}\SloganFont{Reflexivity. }We have
            \begin{webprooftree}%
                \begin{prooftree}%
                    \hypo{\context{\Gamma}{A\type}}%
                    \infer1[(refl)]{\context{\Gamma}{A\doteq A\type}}
                \end{prooftree}%
                .%
            \end{webprooftree}%
        \item\label{inference-rules-in-martin-löf-type-theory-2-symmetry}\SloganFont{Symmetry. }We have
            \begin{webprooftree}%
                \begin{prooftree}%
                    \hypo{\context{\Gamma}{A\doteq B\type}}%
                    \infer1[(symm)]{\context{\Gamma}{B\doteq A\type}}
                \end{prooftree}%
                .%
            \end{webprooftree}%
        \item\label{inference-rules-in-martin-löf-type-theory-2-transitivity}\SloganFont{Transitivity. }We have
            \begin{webprooftree}%
                \begin{prooftree}%
                    \hypo{\context{\Gamma}{A\doteq B\type}}%
                    \hypo{\context{\Gamma}{B\doteq C\type}}%
                    \infer2[(trans)]{\context{\Gamma}{A\doteq C\type}}
                \end{prooftree}%
                .%
            \end{webprooftree}%
        %\item\label{inference-rules-in-martin-löf-type-theory-2-}\SloganFont{. }
    \end{enumerate}
\end{definition}
\begin{definition}{Inference Rules in Martin-Löf Type Theory \rmIII}{inference-rules-in-martin-löf-type-theory-3}%
    Martin-Löf type theory has the following inference rules about judgemental equality of terms, ensuring it behaves like an equivalence relation.
    \begin{enumerate}
        \item\label{inference-rules-in-martin-löf-type-theory-3-reflexivity}\SloganFont{Reflexivity. }We have
            \begin{webprooftree}%
                \begin{prooftree}%
                    \hypo{\context{\Gamma}{a\oftype A\type}}%
                    \infer1[(refl)]{\context{\Gamma}{a\doteq a\oftype A}}
                \end{prooftree}%
                .%
            \end{webprooftree}%
        \item\label{inference-rules-in-martin-löf-type-theory-3-symmetry}\SloganFont{Symmetry. }We have
            \begin{webprooftree}%
                \begin{prooftree}%
                    \hypo{\context{\Gamma}{a\doteq b\oftype A}}%
                    \infer1[(symm)]{\context{\Gamma}{b\doteq a\oftype A}}
                \end{prooftree}%
                .%
            \end{webprooftree}%
        \item\label{inference-rules-in-martin-löf-type-theory-3-transitivity}\SloganFont{Transitivity. }We have
            \begin{webprooftree}%
                \begin{prooftree}%
                    \hypo{\context{\Gamma}{a\doteq b\oftype A}}%
                    \hypo{\context{\Gamma}{b\doteq c\oftype A}}%
                    \infer2[(trans)]{\context{\Gamma}{a\doteq c\oftype A}}
                \end{prooftree}%
                .%
            \end{webprooftree}%
        %\item\label{inference-rules-in-martin-löf-type-theory-3-}\SloganFont{. }
    \end{enumerate}
\end{definition}
\begin{definition}{Inference Rules in Martin-Löf Type Theory \rmIV}{inference-rules-in-martin-löf-type-theory-4}%
    Martin-Löf type theory has the following inference rules about \textbf{variable conversion}. They postulate we may convert a variable to a judgementally equal type/term.\index[type-theory]{variable conversion rules}%
    \begin{enumerate}
        \item\label{inference-rules-in-martin-löf-type-theory-4-variable-conversion-for-types}\SloganFont{Variable Conversion for Types. }We have%
            %--- Begin Footnote ---%
            \footnote{%
                \SloganFont{Slogan: }We may reindex a type $B(x)$ over $x\oftype A$ to $x\oftype A'$ when $A\doteq A'\type$.
            }%
            %---  End Footnote  ---%
            \begin{webprooftree}%
                \begin{prooftree}%
                    \hypo{\context{\Gamma,\,x\oftype A,\,\Delta}{C(x)\type}}%
                    \hypo{\context{\Gamma}{A\doteq B\type}}%
                    \infer2{\context{\Gamma,\,x\oftype B,\,\Delta}{C(x)\type}}
                \end{prooftree}%
                .%
            \end{webprooftree}%
        \item\label{inference-rules-in-martin-löf-type-theory-4-variable-conversion-for-terms}\SloganFont{Variable Conversion for Terms. }We have%
            %--- Begin Footnote ---%
            \footnote{%
                \SloganFont{Slogan: }If we have a term $c(x)$ of type $C(x)$ indexed by $x\oftype A$ and $A\doteq B\type$, then $c(x)$ will have type $C(x)$ indexed by $x\oftype B$.
            }%
            %---  End Footnote  ---%
            \begin{webprooftree}%
                \begin{prooftree}%
                    \hypo{\context{\Gamma,\,x\oftype A,\,\Delta}{c(x)\oftype C(x)}}%
                    \hypo{\context{\Gamma}{A\doteq B\type}}%
                    \infer2{\context{\Gamma,\,x\oftype B,\Delta}{c(x)\oftype C(x)}}
                \end{prooftree}%
                .%
            \end{webprooftree}%
        \item\label{inference-rules-in-martin-löf-type-theory-4-variable-conversion-for-judgemental-equality-of-types}\SloganFont{Variable Conversion for Judgemental Equality of Types. }We have%
            %--- Begin Footnote ---%
            \footnote{%
                \SloganFont{Slogan: }We may transfer a judgemental equality $C(x)\doteq C'(x)\type$ indexed over $x\oftype A$ to a judgemental equality $C(x)\doteq C'(x)\type$ indexed over $x\oftype B$ when $A\doteq B\type$.
            }%
            %---  End Footnote  ---%
            \begin{webprooftree}%
                \begin{prooftree}%
                    \hypo{\context{\Gamma,\,x\oftype A,\,\Delta}{C(x)\doteq C'(x)\type}}%
                    \hypo{\context{\Gamma}{A\doteq B\type}}%
                    \infer2{\context{\Gamma,\,x\oftype B,\,\Delta}{C(x)\doteq C'(x)\type}}
                \end{prooftree}%
                .%
            \end{webprooftree}%
        \item\label{inference-rules-in-martin-löf-type-theory-4-variable-conversion-for-judgemental-equality-of-terms}\SloganFont{Variable Conversion for Judgemental Equality of Terms. }We have%
            %--- Begin Footnote ---%
            \footnote{%
                \SloganFont{Slogan: }We may transfer a judgemental equality $c(x)\doteq c'(x)\oftype C(x)$ indexed over $x\oftype A$ to a judgemental equality $c(x)\doteq c'(x)\oftype C(x)$ indexed over $x\oftype B$ when $A\doteq B\type$.
                \par\vspace*{\TCBBoxCorrection}
            }%
            %---  End Footnote  ---%
            \begin{webprooftree}%
                \begin{prooftree}%
                    \hypo{\context{\Gamma,\,x\oftype A,\,\Delta}{c(x)\doteq c'(x)\oftype C(x)}}%
                    \hypo{\context{\Gamma}{A\doteq B\type}}%
                    \infer2{\context{\Gamma,\,x\oftype B,\,\Delta}{c(x)\doteq c'(x)\oftype C(x)}}
                \end{prooftree}%
                .%
            \end{webprooftree}%
    \end{enumerate}
    These rules may be summarised as
    \begin{webprooftree}%
        \begin{prooftree}%
            \hypo{\context{\Gamma,\,x\oftype A,\,\Delta}{\mathcal{J}}}%
            \hypo{\context{\Gamma}{A\doteq B\type}}%
            \infer2[(VC)]{\context{\Gamma,\,x\oftype B,\,\Delta}{\mathcal{J}}}%
        \end{prooftree}%
    \end{webprooftree}%
    for $\mathcal{J}$ a \textit{generic judgement}.
\end{definition}
\begin{proposition}{More Variable Conversion Rules for Martin-Löf Type Theory}{more-variable-conversion-rules-for-martin-löf-type-theory}%
    Martin-Löf type theory has the following additional variable conversion rules:\index[type-theory]{variable conversion rules}%
    \begin{enumerate}
        \item\label{more-variable-conversion-rules-for-martin-löf-type-theory-converting-terms}\SloganFont{Converting Terms. }We have
            \begin{webprooftree}%
                \begin{prooftree}%
                    \hypo{\context{\Gamma}{a\oftype A}}%
                    \hypo{\context{\Gamma}{A\doteq B\type}}%
                    \infer2[(CT)]{\context{\Gamma}{a\oftype B}}%
                \end{prooftree}%
                .%
            \end{webprooftree}%
        \item\label{more-variable-conversion-rules-for-martin-löf-type-theory-converting-judgemental-equality-for-terms}\SloganFont{Converting Judgemental Equality for Terms. }We have
            \begin{webprooftree}%
                \begin{prooftree}%
                    \hypo{\context{\Gamma}{a\doteq b\oftype A}}%
                    \hypo{\context{\Gamma}{A\doteq B\type}}%
                    \infer2[(CJET)]{\context{\Gamma}{a\doteq b\oftype B}}%
                \end{prooftree}%
                .%
            \end{webprooftree}%
    \end{enumerate}
\end{proposition}
\begin{Proof}{Proof of \cref{more-variable-conversion-rules-for-martin-löf-type-theory}}%
    \FirstProofBox{\cref{more-variable-conversion-rules-for-martin-löf-type-theory-converting-terms}: Converting Terms}%
    We have
    \begin{webprooftree}%
        \begin{prooftree}%
            \hypo{\context{\Gamma}{a\oftype A}}%
            \hypo{\context{\Gamma}{A\doteq B\type}}%
            \infer1{\context{\Gamma}{B\type}}%
            \infer1[(G)]{\context{\Gamma,\,x\oftype B}{x\oftype B}}%
            \hypo{\context{\Gamma}{A\doteq B\type}}%
            \infer1[(symm)]{\context{\Gamma}{B\doteq A\type}}%
            \infer2[(VC)]{\context{\Gamma,\,x\oftype A}{x\oftype B}}%
            \infer2{\context{\Gamma}{a\oftype B}}
        \end{prooftree}%
        .%
    \end{webprooftree}%
    This finishes the proof.

    \ProofBox{\cref{more-variable-conversion-rules-for-martin-löf-type-theory-converting-judgemental-equality-for-terms}: Converting Judgemental Equality for Terms}%
    We have
    \begin{webprooftree}%
        \begin{prooftree}%
            \hypo{\context{\Gamma}{a\doteq b\oftype A}}%
            \hypo{\context{\Gamma}{A\doteq B\type}}%
            \infer1{\context{\Gamma}{B\type}}%
            \infer1[(G)]{\context{\Gamma,\,x\oftype B}{x\oftype B}}%
            \hypo{\context{\Gamma}{A\doteq B\type}}%
            \infer1[(symm)]{\context{\Gamma}{B\doteq A\type}}%
            \infer2[(VC)]{\context{\Gamma,\,x\oftype A}{x\oftype B}}%
            \infer2[(CS2)]{\context{\Gamma}{x[a/x]\doteq x[b/x]\oftype B[a/x]}}
            \infer1{\context{\Gamma}{a\doteq b\oftype B}}%
        \end{prooftree}%
        ,%
    \end{webprooftree}%
    where we have used \cref{inference-rules-in-martin-löf-type-theory-6-substitution-by-judgementally-equal-terms-for-types-2-terms} of \cref{inference-rules-in-martin-löf-type-theory-6} (CS2) from below.
\end{Proof}
\begin{definition}{Inference Rules in Martin-Löf Type Theory \rmV}{inference-rules-in-martin-löf-type-theory-5}%
    Martin-Löf type theory has the following inference rules about \textbf{substitution}:\index[type-theory]{substitution rules}%
    %--- Begin Footnote ---%
    \footnote{%
        \SloganFont{Further Terminology and Notation: }The type $B[a/x]$ is the \index[type-theory]{fibre}\textbf{fibre} of $B$ at $a$, and is also written $B(a)$.
    }%
    %---  End Footnote  ---%
    %--- Begin Footnote ---%
    \footnote{%
        \SloganFont{Further Terminology and Notation: }The term $b[a/x]$ is the \index[type-theory]{value}\textbf{value} of $b(x)$ at $a$, and is also written $b(a)$.
        \par\vspace*{\TCBBoxCorrection}
    }%
    %---  End Footnote  ---%
    \begin{enumerate}
        \item\label{inference-rules-in-martin-löf-type-theory-5-substitution-in-types}\SloganFont{Substitution in Types. }We have
            \begin{webprooftree}%
                \begin{prooftree}%
                    \hypo{\context{\Gamma}{a\oftype A}}%
                    \hypo{\context{\Gamma,\,x\oftype A,\,\Delta}{B(x)\type}}%
                    \infer2{\context{\Gamma,\,\Delta[a/x]}{B[a/x]\type}}%
                \end{prooftree}%
                .%
            \end{webprooftree}%
        \item\label{inference-rules-in-martin-löf-type-theory-5-substitution-in-terms}\SloganFont{Substitution in Terms. }We have
            \begin{webprooftree}%
                \begin{prooftree}%
                    \hypo{\context{\Gamma}{a\oftype A}}%
                    \hypo{\context{\Gamma,\,x\oftype A,\,\Delta}{b(x)\oftype B(x)}}%
                    \infer2{\context{\Gamma,\,\Delta[a/x]}{b[a/x]\oftype B[a/x]}}%
                \end{prooftree}%
                .%
            \end{webprooftree}%
        \item\label{inference-rules-in-martin-löf-type-theory-5-substitution-in-judgemental-equality-of-types}\SloganFont{Substitution in Judgemental Equality of Types. }We have
            \begin{webprooftree}%
                \begin{prooftree}%
                    \hypo{\context{\Gamma}{a\oftype A}}%
                    \hypo{\context{\Gamma,\,x\oftype A,\,\Delta}{B(x)\doteq C(x)\type}}%
                    \infer2{\context{\Gamma,\,\Delta[a/x]}{B[a/x]\doteq C[a/x]\type}}%
                \end{prooftree}%
                .%
            \end{webprooftree}%
        \item\label{inference-rules-in-martin-löf-type-theory-5-substitution-in-judgemental-equality-of-terms}\SloganFont{Substitution in Judgemental Equality of Terms. }We have
            \begin{webprooftree}%
                \begin{prooftree}%
                    \hypo{\context{\Gamma}{a\oftype A}}%
                    \hypo{\context{\Gamma,\,x\oftype A,\,\Delta}{b(x)\doteq b'(x)\oftype B(x)}}%
                    \infer2{\context{\Gamma,\,\Delta[a/x]}{b[a/x]\doteq b'[a/x]\oftype B[a/x]}}%
                \end{prooftree}%
                .%
            \end{webprooftree}%
        %\item\label{inference-rules-in-martin-löf-type-theory-5-}\SloganFont{. }
    \end{enumerate}
    These rules may be summarised as
    \begin{webprooftree}%
        \begin{prooftree}%
            \hypo{\context{\Gamma}{a\oftype A}}%
            \hypo{\context{\Gamma,\,x\oftype A,\,\Delta}{\mathcal{J}}}%
            \infer2{\context{\Gamma,\,\Delta[a/x]}{\mathcal{J}[a/x]}}%
        \end{prooftree}%
        .%
    \end{webprooftree}%
    for $\mathcal{J}$ a generic judgement.
\end{definition}
\begin{definition}{Inference Rules in Martin-Löf Type Theory \rmVI}{inference-rules-in-martin-löf-type-theory-6}%
    Martin-Löf type theory has the following additional \say{congruence} rules about \textbf{substitution}:\index[type-theory]{substitution rules}%
    \begin{enumerate}
        \item\label{inference-rules-in-martin-löf-type-theory-6-substitution-by-judgementally-equal-terms-for-types-1-types}\SloganFont{Substitution by Judgementally Equal Terms \rmI: Types. }We have
            \begin{webprooftree}%
                \begin{prooftree}%
                    \hypo{\context{\Gamma}{a\doteq b\oftype A}}%
                    \hypo{\context{\Gamma,\,x\oftype A,\,\Delta}{C(x)\type}}%
                    \infer2[(CS1)]{\context{\Gamma,\,\Delta[a/x]}{C[a/x]\doteq C[b/x]\type}}%
                \end{prooftree}%
                .%
            \end{webprooftree}%
        \item\label{inference-rules-in-martin-löf-type-theory-6-substitution-by-judgementally-equal-terms-for-types-2-terms}\SloganFont{Substitution by Judgementally Equal Terms \rmII: Terms. }We have
            \begin{webprooftree}%
                \begin{prooftree}%
                    \hypo{\context{\Gamma}{a\doteq b\oftype A}}%
                    \hypo{\context{\Gamma,\,x\oftype A,\,\Delta}{c(x)\oftype C(x)}}%
                    \infer2[(CS2)]{\context{\Gamma,\,\Delta[a/x]}{c[a/x]\doteq c[b/x]\oftype C[a/x]}}%
                \end{prooftree}%
                .%
            \end{webprooftree}%
        %\item\label{inference-rules-in-martin-löf-type-theory-6-}\SloganFont{. }
    \end{enumerate}
\end{definition}
\begin{definition}{Inference Rules in Martin-Löf Type Theory \rmVII}{inference-rules-in-martin-löf-type-theory-7}%
    Martin-Löf type theory has the following rules about \textit{weakening}:\index[type-theory]{weakening rule}%
    %--- Begin Footnote ---%
    \footnote{%
        \SloganFont{Further Terminology: }The type $B$ in context $\Gamma,\,x\oftype A$ is called the \textbf{constant family $B$} or the \textbf{trivial family $B$}.
        \par\vspace*{\TCBBoxCorrection}
    }%
    %---  End Footnote  ---%
    \begin{enumerate}
        \item\label{inference-rules-in-martin-löf-type-theory-7-weakening-for-types}\SloganFont{Weakening for Types. }We have
            \begin{webprooftree}%
                \begin{prooftree}%
                    \hypo{\context{\Gamma}{A\type}}%
                    \hypo{\context{\Gamma}{B(x)\type}}%
                    \infer2{\context{\Gamma,\,a\oftype A}{B(x)\type}}%
                \end{prooftree}%
                .%
            \end{webprooftree}%
        \item\label{inference-rules-in-martin-löf-type-theory-7-weakening-for-terms}\SloganFont{Weakening for Terms. }We have
            \begin{webprooftree}%
                \begin{prooftree}%
                    \hypo{\context{\Gamma}{A\type}}%
                    \hypo{\context{\Gamma}{b(x)\oftype B(x)}}%
                    \infer2{\context{\Gamma,\,a\oftype A}{b(x)\oftype B(x)}}%
                \end{prooftree}%
                .%
            \end{webprooftree}%
        \item\label{inference-rules-in-martin-löf-type-theory-7-weakening-for-judgemental-equality-of-types}\SloganFont{Weakening for Judgemental Equality of Types. }We have
            \begin{webprooftree}%
                \begin{prooftree}%
                    \hypo{\context{\Gamma}{A\type}}%
                    \hypo{\context{\Gamma}{B(x)\doteq C(x)\type}}%
                    \infer2{\context{\Gamma,\,a\oftype A}{B(x)\doteq C(x)\type}}%
                \end{prooftree}%
                .%
            \end{webprooftree}%
        \item\label{inference-rules-in-martin-löf-type-theory-7-weakening-for-judgemental-equality-of-terms}\SloganFont{Weakening for Judgemental Equality of Terms. }We have
            \begin{webprooftree}%
                \begin{prooftree}%
                    \hypo{\context{\Gamma}{A\type}}%
                    \hypo{\context{\Gamma}{b(x)\doteq b'(x)\oftype B(x)}}%
                    \infer2{\context{\Gamma,\,a\oftype A}{b(x)\doteq b'(x)\oftype B(x)}}%
                \end{prooftree}%
                .%
            \end{webprooftree}%
        %\item\label{inference-rules-in-martin-löf-type-theory-7-}\SloganFont{. }
    \end{enumerate}
    These rules may be summarised as
    \begin{webprooftree}%
        \begin{prooftree}%
            \hypo{\context{\Gamma}{A\type}}%
            \hypo{\context{\Gamma}{\mathcal{J}}}%
            \infer2{\context{\Gamma,\,a\oftype A,\,\Delta}{\mathcal{J}}}%
        \end{prooftree}%
        .%
    \end{webprooftree}%
    for $\mathcal{J}$ a generic judgement.
\end{definition}
\begin{definition}{Inference Rules in Martin-Löf Type Theory \rmVIII}{inference-rules-in-martin-löf-type-theory-8}%
    Martin-Löf type theory has the following \textbf{variable rule} about the \textbf{generic element}:\index[type-theory]{generic element rule}%
    \begin{webprooftree}%
        \begin{prooftree}%
            \hypo{\context{\Gamma}{A\type}}%
            \infer1[(G)]{\context{\Gamma,\,x\oftype A}{x\oftype A}}%
        \end{prooftree}%
        .%
    \end{webprooftree}%
\end{definition}
\subsection{Dependent Function Types}\label{subsection-martin-löf-type-theory-dependent-function-types}
\begin{definition}{The Π-Formation Rule}{the-pi-formation-rule}%
    Martin-Löf type theory has the following inference rules about the formation of \index[type-theory]{Π-types}\textbf{Π-types}:\index[type-theory]{Π-formation rule}%
    %--- Begin Footnote ---%
    \footnote{%
        \SloganFont{Further Terminology: }Also called \index[type-theory]{dependent function types}\textbf{dependent function types}.
    }%
    %---  End Footnote  ---%
    \begin{enumerate}
        \item\label{the-pi-formation-rule-forming-pi-types}\SloganFont{Forming Π-Types. }We have%
            %--- Begin Footnote ---%
            \footnote{%
                \SloganFont{Slogan: }We may form a Π-type $\prod_{(x\oftype A)}B(x)$ given a type family $B(x)$ indexed over $x\oftype A$.
            }%
            %---  End Footnote  ---%
            \begin{webprooftree}%
                \begin{prooftree}%
                    \hypo{\context{\Gamma,\,x\oftype A}{B(x)\type}}%
                    \infer1[(Π)]{\context{\Gamma}{\displaystyle\prod_{(x\oftype A)}B(x)\type}}%
                \end{prooftree}%
                .%
            \end{webprooftree}%
        \item\label{the-pi-formation-rule-congruence-rule-for-the-formation-of-pi-types}\SloganFont{Congruence Rule for the Formation of Π-Types. }We have%
            %--- Begin Footnote ---%
            \footnote{%
                \SloganFont{Slogan: }Formation of Π-types respects judgemental equality.
                \par\vspace*{\TCBBoxCorrection}
            }%
            %---  End Footnote  ---%
            \begin{webprooftree}%
                \begin{prooftree}%
                    \hypo{\context{\Gamma}{A\doteq A'\type}}%
                    \hypo{\context{\Gamma,\,x\oftype A}{B(x)\doteq B'(x)\type}}%
                    \infer2[(Π-eq)]{\context{\Gamma}{\displaystyle\prod_{(x\oftype A)}B(x)\doteq\prod_{(x\oftype A')}B'(x)\type}}%
                \end{prooftree}%
                .%
            \end{webprooftree}%
    \end{enumerate}
\end{definition}
\begin{definition}{The Π-Introduction Rule}{the-pi-introduction-rule}%
    Martin-Löf type theory has the following inference rules about the construction of \index[type-theory]{dependent function}\textbf{dependent functions} of type a Π-type:\index[type-theory]{Π-introduction rule}%
    \begin{enumerate}
        \item\label{the-pi-introduction-rule-forming-terms-of-pi-types}\SloganFont{Forming Terms of Π-Types. }We have%
            %--- Begin Footnote ---%
            \footnote{%
                \SloganFont{Further Terminology: }This rule is also called the \index[type-theory]{lambda-abstraction rule@λ-abstraction rule}\textbf{λ-abstraction rule}.
            }%
            %---  End Footnote  ---%
            %--- Begin Footnote ---%
            \footnote{%
                \SloganFont{Further Terminology: }We say that the λ-abstraction $\lambda x\ldotp b(x)$ \textbf{binds} the variable $x$ to $b$.
            }%
            %---  End Footnote  ---%
            %--- Begin Footnote ---%
            \footnote{%
                \SloganFont{Slogan: }To construct a dependent function $\lambda x\ldotp b(x)$ of type $\prod_{x\oftype A}B(x)$, we need to construct a term $b(x)\oftype B(x)$ indexed by $x\oftype A$.
            }%
            %---  End Footnote  ---%
            \begin{webprooftree}%
                \begin{prooftree}%
                    \hypo{\context{\Gamma,\,x\oftype A}{b(x)\oftype B(x)}}%
                    \infer1[(λ)]{\context{\Gamma}{\displaystyle\lambda x\ldotp b(x)\oftype\prod_{x\oftype A}B(x)}}%
                \end{prooftree}%
                .%
            \end{webprooftree}%
        \item\label{the-pi-introduction-rule-congruence-rule-for-the-formation-of-terms-of-pi-types}\SloganFont{Congruence Rule for the Formation of Terms of Π-Types. }We have%
            %--- Begin Footnote ---%
            \footnote{%
                \SloganFont{Slogan: }Construction of dependent functions respects judgemental equality.
                \par\vspace*{\TCBBoxCorrection}
            }%
            %---  End Footnote  ---%
            \begin{webprooftree}%
                \begin{prooftree}%
                    \hypo{\context{\Gamma,\,x\oftype A}{b(x)\doteq b'(x)\oftype B(x)}}%
                    \infer1[(λ-eq)]{\context{\Gamma}{\displaystyle\lambda x\ldotp b(x)\doteq\lambda x\ldotp b'(x)\oftype\prod_{x\oftype A}B(x)}}%
                \end{prooftree}%
                .%
            \end{webprooftree}%
    \end{enumerate}
\end{definition}
\begin{notation}{λ-Notation}{lambda-notation}%
    In \cref{the-pi-introduction-rule}, we have used what is called λ-abstraction, $\lambda x\ldotp b(x)$, and we will also write it as $\llbracket\lambda\ldotp b(x)\rrbracket$ or $\llbracket x\mapsto b(x)\rrbracket$.

    \indent With this alternative notation, the inference rules in \cref{the-pi-introduction-rule-forming-terms-of-pi-types,the-pi-introduction-rule-congruence-rule-for-the-formation-of-terms-of-pi-types} of \cref{the-pi-introduction-rule} look like this:
    \begin{enumerate}
        \item\label{lambda-notation-forming-terms-of-pi-types}\SloganFont{Forming Terms of Π-Types. }We have%
            \begin{webprooftree}%
                \begin{prooftree}%
                    \hypo{\context{\Gamma,\,x\oftype A}{b(x)\oftype B(x)}}%
                    \infer1[(λ)]{\context{\Gamma}{\displaystyle\llbracket x\mapsto b(x)\rrbracket\oftype\prod_{x\oftype A}B(x)}}%
                \end{prooftree}%
                .%
            \end{webprooftree}%
        \item\label{lambda-notation-congruence-rule-for-the-formation-of-terms-of-pi-types}\SloganFont{Congruence Rule for the Formation of Terms of Π-Types. }We have%
            \begin{webprooftree}%
                \begin{prooftree}%
                    \hypo{\context{\Gamma,\,x\oftype A}{b(x)\doteq b'(x)\oftype B(x)}}%
                    \infer1[(λ-eq)]{\context{\Gamma}{\displaystyle\llbracket x\mapsto b(x)\rrbracket\doteq\llbracket x\mapsto b'(x)\rrbracket\oftype\prod_{x\oftype A}B(x)}}%
                \end{prooftree}%
                .%
            \end{webprooftree}%
    \end{enumerate}
\end{notation}
\begin{definition}{The Π-Elimination Rule}{the-pi-elimination-rule}%
    Martin-Löf type theory has the following inference rules about the use of dependent functions:\index[type-theory]{Π-elimination rule}%
    \begin{enumerate}
        \item\label{the-pi-formation-rule-the-pi-elimination-rule}\SloganFont{The Π-Elimination Rule. }We have%
            %--- Begin Footnote ---%
            \footnote{%
                \SloganFont{Further Terminology: }This rule is also called the \index[type-theory]{evaluation rule}\textbf{λ-abstraction rule}.
            }%
            %---  End Footnote  ---%
            \begin{webprooftree}%
                \begin{prooftree}%
                    \hypo{\context{\Gamma}{\displaystyle f\oftype\prod_{x\oftype A}B}}%
                    \infer1[(ev1)]{\context{\Gamma,\,x\oftype A}{f(x)\oftype B(x)}}%
                \end{prooftree}%
                .%
            \end{webprooftree}%
        \item\label{the-pi-formation-rule-congruence-rule-for-pi-elimination}\SloganFont{Congruence Rule for Π-Elimination. }We have%
            %--- Begin Footnote ---%
            \footnote{%
                \SloganFont{Slogan: }Judgementall equal dependent functions evaluate to judgemental equal terms.
                \par\vspace*{\TCBBoxCorrection}
            }%
            %---  End Footnote  ---%
            \begin{webprooftree}%
                \begin{prooftree}%
                    \hypo{\context{\Gamma}{\displaystyle f\doteq f'\oftype\prod_{x\oftype A}B}}%
                    \infer1[(ev-eq)]{\context{\Gamma,\,x\oftype A}{f(x)\doteq f'(x)\oftype B(x)}}%
                \end{prooftree}%
                .%
            \end{webprooftree}%
    \end{enumerate}
\end{definition}
\begin{definition}{The Π-Computations Rules}{the-pi-computation-rules}%
    Martin-Löf type theory has the following inference rules about computation of Π-types:\index[type-theory]{Π-computation rules}%
    \begin{enumerate}
        \item\label{the-pi-computation-rules-beta-reduction}\SloganFont{β-Reduction. }We have%
            %--- Begin Footnote ---%
            \footnote{%
                \SloganFont{Slogan: }β-reduction is inverse to λ-abstraction.
            }%
            %---  End Footnote  ---%
            \begin{webprooftree}%
                \begin{prooftree}%
                    \hypo{\context{\Gamma,\,x\oftype A}{b(x)\oftype B(x)}}%
                    \infer1[(β)]{\context{\Gamma,\,x\oftype A}{\llbracket y\mapsto b(y)\rrbracket(x)\doteq b(x)\oftype B(x)}}%
                \end{prooftree}%
                .%
            \end{webprooftree}%
        \item\label{the-pi-computation-rules-eta-conversion}\SloganFont{η-Conversion. }We have%
            %--- Begin Footnote ---%
            \footnote{%
                \SloganFont{Slogan: }All terms of a Π-type are dependent functions.
                \par\vspace*{\TCBBoxCorrection}
            }%
            %---  End Footnote  ---%
            \begin{webprooftree}%
                \begin{prooftree}%
                    \hypo{\context{\Gamma}{\displaystyle f\oftype\prod_{x\oftype A}B(x)}}%
                    \infer1[(η)]{\context{\Gamma}{\displaystyle\llbracket x\mapsto f(x)\rrbracket\doteq f\oftype\prod_{x\oftype A}B(x)}}%
                \end{prooftree}%
                .%
            \end{webprooftree}%
    \end{enumerate}
\end{definition}
\begin{proposition}{Properties of Dependent Function Types}{properties-of-dependent-function-types}%
    Let $A$ be a type and let $B(x)$ be a type family indexed over $x\oftype A$.
    \begin{enumerate}
        \item\label{properties-of-dependent-function-types-dependent-function-extensionality}\SloganFont{Dependent Function Extensionality. }We have
            \begin{webprooftree}%
                \begin{prooftree}%
                    \hypo{\context{\Gamma}{\displaystyle f\oftype\prod_{x\oftype A}B(x)}}%
                    \hypo{\context{\Gamma}{\displaystyle f'\oftype\prod_{x\oftype A}B(x)}}%
                    \hypo{\context{\Gamma,x\oftype A}{f(x)\doteq f'(x)\oftype B(x)}}%
                    \infer3[(FEXT)]{\context{\Gamma}{\displaystyle f\doteq f'\oftype\prod_{x\oftype A}B(x)}}%
                \end{prooftree}%
            \end{webprooftree}%
        %\item\label{properties-of-function-types-}\SloganFont{. }
    \end{enumerate}
\end{proposition}
\begin{Proof}{Proof of \cref{properties-of-dependent-function-types}}%
    \FirstProofBox{\cref{properties-of-dependent-function-types-dependent-function-extensionality}: Dependent Function Extensionality}%
    We have
    \begin{scalewebprooftree}%
        \begin{prooftree}%
            \hypo{\context{\Gamma}{\displaystyle f\oftype\prod_{x\oftype A}B(x)}}%
            \infer1[(η)]{\context{\Gamma}{\displaystyle\llbracket x\mapsto f(x)\rrbracket\doteq f\oftype\prod_{x\oftype A}B(x)}}%
            \hypo{\context{\Gamma,a\oftype A}{f(a)\doteq f'(a)\oftype B}}%
            \infer1[(λ-eq)]{\context{\Gamma}{\displaystyle\llbracket x\mapsto f(x)\rrbracket\doteq\llbracket x\mapsto f'(x)\rrbracket\oftype\prod_{x\oftype A}B(x)}}%
            \infer2[(trans)]{\context{\Gamma}{\displaystyle f\doteq\llbracket x\mapsto f'(x)\rrbracket\oftype\prod_{x\oftype A}B(x)}}%
            \hypo{\context{\Gamma}{\displaystyle f'\oftype\prod_{x\oftype A}B(x)}}%
            \infer1[(η)]{\context{\Gamma}{\displaystyle\llbracket x\mapsto f'(x)\rrbracket\doteq f'\oftype\prod_{x\oftype A}B(x)}}%
            \infer2[(trans)]{\context{\Gamma}{\displaystyle f\doteq f'\oftype\prod_{x\oftype A}B(x)}}%
        \end{prooftree}%
        .%
    \end{scalewebprooftree}%
    This finishes the proof.
\end{Proof}
\subsection{Function Types and Functions}\label{subsection-martin-löf-type-theory-function-types-and-functions}
Let $A$ and $B$ be types.
\begin{definition}{Function Types}{function-types}%
    The \index[type-theory]{function type}\textbf{type of (ordinary) functions from $A$ to $B$} is the type%
    %--- Begin Footnote ---%
    \footnote{%
        \SloganFont{Further Notation: }Also written \index[notation]{BA@$B^{A}$}$B^{A}$ or \index[notation]{AB@$[A,B]$}$[A,B]$.
    } %
    %---  End Footnote  ---%
    \index[notation]{AtoB@$A\to B$}$A\to B$ defined by%
    \[
        A\to B%
        \defeq%
        \prod_{x\oftype A}B%
    \]%
    via the derivation
    \begin{webprooftree}%
        \begin{prooftree}%
            \hypo{\context{\Gamma}{A\type}}%
            \hypo{\context{\Gamma}{B\type}}%
            \infer2[(W)]{\context{\Gamma,\,x\oftype A}{B\type}}
            \infer1[(Π)]{\context{\Gamma}{\displaystyle\prod_{x\oftype A}B}}
            \infer1[(Π)]{\context{\Gamma}{\displaystyle A\to B\doteq\prod_{x\oftype A}B\type}}
        \end{prooftree}%
        .%
    \end{webprooftree}%
\end{definition}
\begin{definition}{Further Terminology for Function Types}{further-terminology-for-function-types}%
    Let $A\to B$ be the type of functions from $A$ to $B$.
    \begin{enumerate}
        \item\label{further-terminology-for-function-types-functions}The terms of $A\to B$ are called \index[type-theory]{function}\textbf{functions}.
        \item\label{further-terminology-for-function-types-domain}Given a function $f\oftype A\to B$, the type $A$ is called its \index[type-theory]{domain}\textbf{domain}.
        \item\label{further-terminology-for-function-types-codomain}Given a function $f\oftype A\to B$, the type $B$ is called its \index[type-theory]{codomain}\textbf{codomain}.
    \end{enumerate}
\end{definition}
\begin{example}{Identity Functions}{identity-functions-example}%
    See \cref{subsection-martin-löf-type-theory-identity-functions}.
\end{example}
\begin{example}{Constant Functions}{constant-functions}%
    Given a term $y$ of type $B$, we have a function \index[notation]{consty@$\const_{y}$}$\const_{y}\oftype A\to B$, giving rise to a judgement of the form
    \begin{webprooftree}%
        \begin{prooftree}%
            \hypo{\context{\Gamma}{A\type}}%
            \hypo{\context{\Gamma}{B\type}}%
            \infer2{\context{\Gamma,\,y\oftype B}{\const_{y}\oftype A\to B}}%
        \end{prooftree}%
        ,%
    \end{webprooftree}%
    and being defined by
    \begin{webprooftree}%
        \begin{prooftree}%
            \hypo{\context{\Gamma}{A\type}}%
            \hypo{\context{\Gamma}{B\type}}%
            \hypo{\context{\Gamma}{y\oftype B}}%
            \infer3[(const)]{\context{\Gamma}{\const_{y}\doteq\llbracket x\mapsto y\rrbracket\oftype A\to B}}%
        \end{prooftree}%
        .%
    \end{webprooftree}%
    It satisfies the following two properties:
    \begin{enumerate}
        \item\label{constant-functions-evaluation-for-constant-functions}\SloganFont{Evaluation for Constant Functions. }We have
            \begin{webprooftree}%
                \begin{prooftree}%
                    \hypo{\context{\Gamma}{A\type}}%
                    \hypo{\context{\Gamma}{B\type}}%
                    \hypo{\context{\Gamma}{y\oftype B}}%
                    \infer3[(const-ev)]{\context{\Gamma,\,x\oftype A}{\const_{y}(x)\doteq y\oftype B}}%
                \end{prooftree}%
                .%
            \end{webprooftree}%
        \item\label{constant-functions-postcomposition-with-the-constant-function}\SloganFont{Postcomposition With the Constant Function. }We have
            \begin{webprooftree}%
                \begin{prooftree}%
                    \hypo{\context{\Gamma}{f\oftype A\to B}}%
                    \infer1{\context{\Gamma,\,z\oftype C}{\const_{z}\circ f\doteq\const_{z}\oftype A\to C}}%
                \end{prooftree}%
                .%
            \end{webprooftree}%
        \item\label{constant-functions-precomposition-with-the-constant-function}\SloganFont{Precomposition With the Constant Function. }We have
            \begin{webprooftree}%
                \begin{prooftree}%
                    \hypo{\context{\Gamma}{g\oftype B\to C}}%
                    \infer1{\context{\Gamma,\,y\oftype B}{g\circ\const_{y}\doteq\const_{g(y)}\oftype A\to C}}%
                \end{prooftree}%
                .%
            \end{webprooftree}%
    \end{enumerate}
\end{example}
\begin{Proof}{Proof of \cref{constant-functions}}%
    \FirstProofBox{Construction of $\const$}%
    We have
    \begin{webprooftree}%
        \begin{prooftree}%
            \hypo{\context{\Gamma}{A\type}}%
            \hypo{\context{\Gamma}{B\type}}%
            \infer1[(G)]{\context{\Gamma,\,y\oftype B}{y\oftype B}}%
            \infer2[(const)]{\context{\Gamma,\,y\oftype B}{\const_{y}\oftype A\to B}}%
        \end{prooftree}%
        .%
    \end{webprooftree}%
    This finishes the construction of $\const_{y}$.

    \ProofBox{\cref{constant-functions-evaluation-for-constant-functions}: Evaluation for Constant Functions}%
    We have
    \begin{webprooftree}%
        \begin{prooftree}%
            \hypo{\context{\Gamma}{A\type}}%
            \hypo{\context{\Gamma}{B\type}}%
            \hypo{\context{\Gamma}{y\oftype B}}%
            \infer3[(const-def)]{\context{\Gamma}{\const_{y}\doteq\llbracket x\mapsto y\rrbracket\oftype A\to B}}%
            \infer1[(ev-eq)]{\context{\Gamma,\,a\oftype A}{\const_{y}(a)\doteq\llbracket x\mapsto y\rrbracket(a)\oftype A}}%
            \hypo{\context{\Gamma}{A\type}}%
            \hypo{\context{\Gamma}{A\type}}%
            \infer1[(G)]{\context{\Gamma,\,a\oftype A}{a\oftype A}}%
            \infer2[(β)]{\context{\Gamma,\,a\oftype A}{\llbracket x\mapsto y\rrbracket(a)\doteq a\oftype A}}%
            \infer2[(trans)]{\context{\Gamma,\,a\oftype A}{\const_{y}(a)\doteq a\oftype A}}%
        \end{prooftree}%
        .%
    \end{webprooftree}%
    This finishes the proof.%


    \ProofBox{\cref{constant-functions-postcomposition-with-the-constant-function}: Postcomposition With the Constant Function}%
    Firstly, note that it suffices to produce a derivation for the judgement $\context{\Gamma,\,x\oftype A}{\const_{y}(f(x))\doteq y\oftype B}$, as we can then finish that derivation with
    \begin{scalewebprooftree}%
        \begin{prooftree}%
            \hypo{\evdots}%
            \infer1{\context{\Gamma,\,x\oftype A}{\const_{y}(f(x))\doteq y\oftype B}}
            \infer1[(λ-eq)]{\context{\Gamma}{\llbracket x\mapsto\const_{y}(f(x))\rrbracket\doteq\llbracket x\mapsto y\rrbracket\oftype A\to B}}%
            \hypo{\context{\Gamma}{\const_{y}\oftype A\to B}}%
            \infer1[(η)]{\context{\Gamma}{\llbracket x\mapsto y\rrbracket\doteq\const_{y}\oftype A\to B}}%
            \infer2[(trans)]{\context{\Gamma}{\const_{y}\circ f\doteq\const_{y}\oftype A\to B}}%
        \end{prooftree}%
        .%
    \end{scalewebprooftree}%
    Now, for the proof of the judgement, we have
    \begin{webprooftree}%
        \begin{prooftree}%
            \hypo{\context{\Gamma}{f\oftype A\to B}}%
            \infer1[(ev1)]{\context{\Gamma,\,x\oftype A}{f(x)\oftype B}}%
            \hypo{\context{\Gamma}{A\type}}%
            \hypo{\context{\Gamma}{C\type}}%
            \hypo{\context{\Gamma}{z\oftype C}}%
            \infer3[(const)]{\context{\Gamma}{\const_{z}\doteq\llbracket x\mapsto z\rrbracket\oftype A\to C}}%
            \infer1[(const-ev)]{\context{\Gamma,\,y\oftype B}{\const_{z}(y)\doteq z\oftype C}}%
            \infer1[(W)]{\context{\Gamma,\,x\oftype A,\,y\oftype B}{\const_{z}(y)\doteq z\oftype C}}%
            \infer2[(S)]{\context{\Gamma,\,x\oftype A}{\const_{z}(f(x))\doteq z\oftype B}}
        \end{prooftree}%
        .%
    \end{webprooftree}%
    This finishes the proof.

    \ProofBox{\cref{constant-functions-precomposition-with-the-constant-function}: Precomposition With the Constant Function}%
    Firstly, note that it suffices to produce a derivation for the judgement $\context{\Gamma,\,x\oftype A}{g(\const_{y}(x))\doteq g(y)\oftype B}$, as we can then finish that derivation with
    \begin{scalewebprooftree}%
        \begin{prooftree}%
            \hypo{\evdots}%
            \infer1{\context{\Gamma,\,x\oftype A}{g(\const_{y}(x))\doteq g(y)\oftype B}}
            \infer1[(λ-eq)]{\context{\Gamma}{\llbracket x\mapsto g(\const_{y}(x))\rrbracket\doteq\llbracket x\mapsto g(y)\rrbracket\oftype A\to C}}%
            \hypo{\context{\Gamma}{g\oftype B\to C}}%
            \infer1[(η)]{\context{\Gamma}{\llbracket y\mapsto g(y)\rrbracket\doteq g\oftype B\to C}}%
            \infer1[(TODO)]{\context{\Gamma}{\llbracket x\mapsto g(y)\rrbracket\doteq g??\oftype A\to C}}%
            \infer2[(trans)]{\context{\Gamma}{g\circ\const_{y}\doteq\const_{g(y)}\oftype A\to C}}%
        \end{prooftree}%
        .%
    \end{scalewebprooftree}%
    Now, for the proof of the judgement, we have
    \begin{webprooftree}%
        \begin{prooftree}%
            \hypo{\context{\Gamma}{A\type}}%
            \hypo{\context{\Gamma}{B\type}}%
            \hypo{\context{\Gamma}{y\oftype B}}%
            \infer3[(const-ev)]{\context{\Gamma,\,x\oftype A}{\const_{y}(x)\doteq y\oftype B}}%
            \hypo{\context{\Gamma}{g\oftype B\to C}}%
            \infer1[(refl)]{\context{\Gamma}{g\doteq g\oftype B\to C}}%
            \infer2[(ev-eq)]{\context{\Gamma,\,x\oftype A}{g(\const_{y}(x))\doteq g(y)\oftype B}}%
        \end{prooftree}%
        .%
    \end{webprooftree}%
    This finishes the proof.
\end{Proof}
\begin{proposition}{Inference Rules for Function Types}{properties-of-function-types}%
    Let $A$ and $B$ be types.
    \begin{enumerate}
        \item\label{properties-of-function-types-formation-of-function-types}\SloganFont{Formation of Function Types. }We have
            \begin{webprooftree}%
                \begin{prooftree}%
                    \hypo{\context{\Gamma}{A\type}}%
                    \hypo{\context{\Gamma}{B\type}}%
                    \infer2[(FT)]{\context{\Gamma}{A\to B\type}}%
                \end{prooftree}%
                .%
            \end{webprooftree}%
        \item\label{properties-of-function-types-congruence-rule-for-the-formation-of-function-types}\SloganFont{Congruence Rule for the Formation of Function Types. }We have
            \begin{webprooftree}%
                \begin{prooftree}%
                    \hypo{\context{\Gamma}{A\doteq A'\type}}%
                    \hypo{\context{\Gamma}{B\doteq B'\type}}%
                    \infer2[(Π-eq)]{\context{\Gamma}{(A\to B)\doteq(A'\to B')\type}}%
                \end{prooftree}%
                .%
            \end{webprooftree}%
        \item\label{properties-of-function-types-lambda-abstraction}\SloganFont{λ-Abstraction. }We have
            \begin{webprooftree}%
                \begin{prooftree}%
                    \hypo{\context{\Gamma}{B\type}}%
                    \hypo{\context{\Gamma,\,x\oftype A}{b(x)\oftype B}}%
                    \infer2[(λ)]{\context{\Gamma}{\llbracket x\mapsto b(x)\rrbracket\oftype A\to B}}%
                \end{prooftree}%
                .%
            \end{webprooftree}%
        \item\label{properties-of-function-types-congruence-rule-for-the-formation-of-functions}\SloganFont{Congruence Rule for the Formation of Functions. }We have
            \begin{webprooftree}%
                \begin{prooftree}%
                    \hypo{\context{\Gamma,\,x\oftype A}{b(x)\doteq b'(x)\oftype B}}%
                    \infer1[(λ-eq)]{\context{\Gamma}{\llbracket x\mapsto b(x)\rrbracket\doteq\llbracket x\mapsto b'(x)\rrbracket\oftype A\to B}}%
                \end{prooftree}%
                .%
            \end{webprooftree}%
        \item\label{properties-of-function-types-evaluation-1}\SloganFont{Evaluation \rmI. }We have
            \begin{webprooftree}%
                \begin{prooftree}%
                    \hypo{\context{\Gamma}{f\oftype A\to B}}%
                    \infer1[(ev1)]{\context{\Gamma,\,x\oftype A}{f(x)\oftype B}}%
                \end{prooftree}%
                .%
            \end{webprooftree}%
        \item\label{properties-of-function-types-evaluation-2}\SloganFont{Evaluation \rmII. }We have
            \begin{webprooftree}%
                \begin{prooftree}%
                    \hypo{\context{\Gamma}{a\oftype A}}%
                    \hypo{\context{\Gamma}{f\oftype A\to B}}%
                    \infer2[(ev2)]{\context{\Gamma}{f(a)\oftype B}}%
                \end{prooftree}%
                .%
            \end{webprooftree}%
        \item\label{properties-of-function-types-evaluation-3}\SloganFont{Evaluation \rmIII. }We have
            \begin{webprooftree}%
                \begin{prooftree}%
                    \hypo{\context{\Gamma}{A\type}}%
                    \hypo{\context{\Gamma}{B\type}}%
                    \infer2[(ev3)]{\context{\Gamma,\,f\oftype A\to B,\,x\oftype A}{f(x)\oftype B}}%
                \end{prooftree}%
                .%
            \end{webprooftree}%
        \item\label{properties-of-function-types-congruence-rule-for-evaluation}\SloganFont{Congruence Rule for Evaluation. }We have
            \begin{webprooftree}%
                \begin{prooftree}%
                    \hypo{\context{\Gamma}{f\doteq f'\oftype A\to B}}%
                    \infer1[(ev-eq)]{\context{\Gamma,\,x\oftype A}{f(x)\doteq f'(x)\oftype B}}%
                \end{prooftree}%
            \end{webprooftree}%
        \item\label{properties-of-function-types-beta-reduction}\SloganFont{β-Reduction. }We have
            \begin{webprooftree}%
                \begin{prooftree}%
                    \hypo{\context{\Gamma}{B\type}}%
                    \hypo{\context{\Gamma,\,x\oftype A}{b(x)\oftype B}}%
                    \infer2[(β)]{\context{\Gamma,\,x\oftype A}{\llbracket y\mapsto b(y)\rrbracket(x)\doteq b(x)\oftype B}}%
                \end{prooftree}%
                .%
            \end{webprooftree}%
        \item\label{properties-of-function-types-eta-conversion}\SloganFont{η-Conversion. }We have
            \begin{webprooftree}%
                \begin{prooftree}%
                    \hypo{\context{\Gamma}{f\oftype A\to B}}%
                    \infer1[(η)]{\context{\Gamma}{\llbracket x\mapsto f(x)\rrbracket\doteq f\oftype A\to B}}%
                \end{prooftree}%
                .%
            \end{webprooftree}%
        \item\label{properties-of-function-types-function-extensionality}\SloganFont{Function Extensionality. }We have
            \begin{webprooftree}%
                \begin{prooftree}%
                    \hypo{\context{\Gamma}{f\oftype A\to B}}%
                    \hypo{\context{\Gamma}{f'\oftype A\to B}}%
                    \hypo{\context{\Gamma,a\oftype A}{f(a)\doteq f'(a)\oftype B}}%
                    \infer3[(FEXT)]{\context{\Gamma}{f\doteq f'\oftype A\to B}}%
                \end{prooftree}%
            \end{webprooftree}%
        %\item\label{properties-of-function-types-}\SloganFont{. }
    \end{enumerate}
\end{proposition}
\begin{Proof}{Proof of \cref{properties-of-function-types}}%
    \ProofBox{\cref{properties-of-function-types-formation-of-function-types}: Formation of Function Types}%
    This follows from the respective inference rule for dependent function types, \cref{the-pi-formation-rule}.

    \ProofBox{\cref{properties-of-function-types-congruence-rule-for-the-formation-of-function-types}: Congruence Rule for the Formation of Function Types}%
    This follows from the respective inference rule for dependent function types, \cref{the-pi-formation-rule-congruence-rule-for-the-formation-of-pi-types} of \cref{the-pi-formation-rule}.

    \ProofBox{\cref{properties-of-function-types-lambda-abstraction}: λ-Abstraction}%
    This follows from the respective inference rule for dependent function types, \cref{the-pi-introduction-rule}.

    \ProofBox{\cref{properties-of-function-types-congruence-rule-for-the-formation-of-functions}: Congruence Rule for the Formation of Functions}%
    This follows from the respective inference rule for dependent function types, \cref{the-pi-introduction-rule-congruence-rule-for-the-formation-of-terms-of-pi-types} of \cref{the-pi-formation-rule}.

    \ProofBox{\cref{properties-of-function-types-evaluation-1}: Evaluation \rmI}%
    This follows from the respective inference rule for dependent function types, \cref{the-pi-elimination-rule}.

    \ProofBox{\cref{properties-of-function-types-evaluation-2}: Evaluation \rmII}%
    We have
    \begin{webprooftree}%
        \begin{prooftree}%
            \hypo{\context{\Gamma}{a\oftype A}}%
            \hypo{\context{\Gamma}{f\oftype A\to B}}%
            \infer1[(ev1)]{\context{\Gamma,\,x\oftype A}{f(x)\oftype B}}%
            \infer2[(S)]{\context{\Gamma}{f[a/x]\oftype B[a/x]}}%
            \infer1{\context{\Gamma}{f(a)\oftype B}}%
        \end{prooftree}%
        .%
    \end{webprooftree}%
    This finishes the proof.

    \ProofBox{\cref{properties-of-function-types-evaluation-3}: Evaluation \rmIII}%
    We have
    \begin{webprooftree}%
        \begin{prooftree}%
            \hypo{\context{\Gamma}{A\type}}%
            \hypo{\context{\Gamma}{B\type}}%
            \infer2[(FT)]{\context{\Gamma}{A\to B\type}}%
            \infer1[(G)]{\context{\Gamma,\,f\oftype A\to B}{f\oftype A\to B}}%
            \infer1[(ev1)]{\context{\Gamma,\,f\oftype A\to B,\,x\oftype A}{f(x)\oftype B}}%
        \end{prooftree}%
        .%
    \end{webprooftree}%
    This finishes the proof.

    \ProofBox{\cref{properties-of-function-types-congruence-rule-for-evaluation}: Congruence Rule for Evaluation}%
    This follows from the respective inference rule for dependent function types, \cref{the-pi-formation-rule-congruence-rule-for-pi-elimination} of \cref{the-pi-formation-rule}.

    \ProofBox{\cref{properties-of-function-types-beta-reduction}: β-Reduction}%
    This follows from the respective inference rule for dependent function types, \cref{the-pi-computation-rules-beta-reduction} of \cref{the-pi-computation-rules}.

    \ProofBox{\cref{properties-of-function-types-eta-conversion}: η-Conversion}%
    This follows from the respective inference rule for dependent function types, \cref{the-pi-computation-rules-eta-conversion} of \cref{the-pi-computation-rules}.

    \ProofBox{\cref{properties-of-function-types-function-extensionality}: Function Extensionality}%
    This follows from the respective inference rule for dependent function types, \cref{properties-of-dependent-function-types-dependent-function-extensionality} of \cref{properties-of-dependent-function-types}. Here, however, is a complete derivation:
    \begin{scalewebprooftree}%
        \begin{prooftree}%
            \hypo{\context{\Gamma}{f\oftype A\to B}}%
            \infer1[(η)]{\context{\Gamma}{\llbracket x\mapsto f(x)\rrbracket\doteq f\oftype A\to B}}%
            \hypo{\context{\Gamma,a\oftype A}{f(a)\doteq f'(a)\oftype B}}%
            \infer1[(λ-eq)]{\context{\Gamma}{\llbracket x\mapsto f(x)\rrbracket\doteq\llbracket x\mapsto f'(x)\rrbracket\oftype A\to B}}%
            \infer2[(trans)]{\context{\Gamma}{f\doteq\llbracket x\mapsto f'(x)\rrbracket\oftype A\to B}}%
            \hypo{\context{\Gamma}{f'\oftype A\to B}}%
            \infer1[(η)]{\context{\Gamma}{\llbracket x\mapsto f'(x)\rrbracket\doteq f'\oftype A\to B}}%
            \infer2[(trans)]{\context{\Gamma}{f\doteq f'\oftype A\to B}}%
        \end{prooftree}%
        .%
    \end{scalewebprooftree}%
    This finishes the proof.
\end{Proof}
\subsection{Identity Functions}\label{subsection-martin-löf-type-theory-identity-functions}
Let $A$ be a type.
\begin{definition}{Identity Functions}{identity-functions}%
    The \index[type-theory]{identity function}\textbf{identity function} of $A$ is the term \index[notation]{idA@$\id_{A}$}$\id_{A}\oftype A\to A$ defined by
    \begin{webprooftree}%
        \begin{prooftree}%
            \hypo{\context{\Gamma}{A\type}}%
            \infer1[(id-def)]{\context{\Gamma}{\id_{A}\doteq\llbracket x\mapsto x\rrbracket\oftype A\to A}}%
        \end{prooftree}%
    \end{webprooftree}%
    via the derivation
    \begin{webprooftree}%
        \begin{prooftree}%
            \hypo{\context{\Gamma}{A\type}}%
            \hypo{\context{\Gamma}{A\type}}%
            \infer1[(G)]{\context{\Gamma,\,x\oftype A}{x\oftype A}}%
            \infer2[(λ)]{\context{\Gamma}{\llbracket x\mapsto x\rrbracket\oftype A\to A}}%
            \infer1{\context{\Gamma}{\id_{A}\doteq\llbracket x\mapsto x\rrbracket\oftype A\to A}}%
        \end{prooftree}%
        .%
    \end{webprooftree}%
\end{definition}
\begin{proposition}{Inference Rules for Identity Functions}{inference-rules-for-identity-functions}%
    Let $A$ be a type.
    \begin{enumerate}
        \item\label{inference-rules-for-identity-functions-formation-of-identity-functions}\SloganFont{Formation of Identity Functions. }We have
            \begin{webprooftree}%
                \begin{prooftree}%
                    \hypo{\context{\Gamma}{A\type}}%
                    \infer1[(id)]{\context{\Gamma}{\id_{A}\oftype A\to A}}%
                \end{prooftree}%
                .%
            \end{webprooftree}%
        \item\label{inference-rules-for-identity-functions-evaluation-for-identity-functions}\SloganFont{Evaluation for Identity Functions. }We have
            \begin{webprooftree}%
                \begin{prooftree}%
                    \hypo{\context{\Gamma}{A\type}}%
                    \infer1[(id-ev)]{\context{\Gamma,\,x\oftype A}{\id_{A}(x)\doteq x\oftype A}}%
                \end{prooftree}%
                .%
            \end{webprooftree}%
        %\item\label{inference-rules-for-identity-functions-}\SloganFont{. }
    \end{enumerate}
\end{proposition}
\begin{Proof}{Proof of \cref{inference-rules-for-identity-functions}}%
    \FirstProofBox{\cref{inference-rules-for-identity-functions-formation-of-identity-functions}: Formation of Identity Functions}%
    This follows from \cref{inference-rules-in-martin-löf-type-theory-1-formation-of-judgemental-equality-of-terms-1} of \cref{inference-rules-in-martin-löf-type-theory-1}.

    \ProofBox{\cref{inference-rules-for-identity-functions-evaluation-for-identity-functions}: Evaluation for Identity Functions}%
    We have
    \begin{webprooftree}%
        \begin{prooftree}%
            \hypo{\context{\Gamma}{A\type}}%
            \infer1[(id-def)]{\context{\Gamma}{\id_{A}\doteq\llbracket x\mapsto x\rrbracket\oftype A\to A}}%
            \infer1[(ev-eq)]{\context{\Gamma,\,a\oftype A}{\id_{A}(a)\doteq\llbracket x\mapsto x\rrbracket(a)\oftype A}}%
            \hypo{\context{\Gamma}{A\type}}%
            \hypo{\context{\Gamma}{A\type}}%
            \infer1[(G)]{\context{\Gamma,\,a\oftype A}{a\oftype A}}%
            \infer2[(β)]{\context{\Gamma,\,a\oftype A}{\llbracket x\mapsto x\rrbracket(a)\doteq a\oftype A}}%
            \infer2[(trans)]{\context{\Gamma,\,a\oftype A}{\id_{A}(a)\doteq a\oftype A}}%
        \end{prooftree}%
        .%
    \end{webprooftree}%
    This finishes the proof.
\end{Proof}
\subsection{Composition of Functions}\label{subsection-martin-löf-type-theory-composition-of-functions}
Let $A$, $B$, and $C$ be types.
\begin{definition}{Composition of Functions}{composition-of-functions}%
    The \index[type-theory]{composition operation}\textbf{composition operation} associated to $A$, $B$, and $C$ is the term%
    %--- Begin Footnote ---%
    \footnote{%
        \SloganFont{Further Notation: }We write $g\circ f$ for $\comp(g)(f)$.
        \par\vspace*{\TCBBoxCorrection}
    }%
    %---  End Footnote  ---%
    \[
        \comp_{A,B,C}%
        \oftype%
        [B,C]%
        \to%
        [[A,B],[A,C]]
    \]%
    of type $[B,C]\to[[A,B],[A,C]]$ defined by
    \begin{align*}
        \comp_{A,B,C} &\defeq \lambda g\ldotp\lambda f\ldotp \lambda x\ldotp g(f(x))\\
                      &\defeq \llbracket g\mapsto\llbracket f\mapsto\llbracket x\mapsto g(f(x))\rrbracket\rrbracket\rrbracket
    \end{align*}
    via the derivation
    \begin{scalewebprooftree}%
        \begin{prooftree}%
            \hypo{\context{\Gamma}{A\type}}%
            \hypo{\context{\Gamma}{B\type}}%
            \infer2[(ev3)]{\context{\Gamma,\,f\oftype[A,B],\,x\oftype A}{f(x)\oftype B}}%
            \infer1[(W)]{\context{\Gamma,\,g\oftype[B,C],\,f\oftype[A,B],\,x\oftype A}{f(x)\oftype B}}%
            \hypo{\context{\Gamma}{B\type}}%
            \hypo{\context{\Gamma}{C\type}}%
            \infer2[(ev3)]{\context{\Gamma,\,g\oftype[B,C],\,y\oftype B}{g(y)\oftype C}}%
            \infer1[(W)]{\context{\Gamma,\,g\oftype[B,C],\,f\oftype[A,B],\,y\oftype B}{g(y)\oftype C}}%
            \infer2[(ev1)]{\context{\Gamma,\,g\oftype[B,C],\,f\oftype[A,B],\,x\oftype A}{g(f(x))\oftype C}}%
            \infer1[(λ)]{\context{\Gamma,\,g\oftype[B,C],\,f\oftype[A,B]}{\llbracket x\mapsto g(f(x))\rrbracket\oftype[A,C]}}%
            \infer1[(λ)]{\context{\Gamma,\,g\oftype[B,C]}{\llbracket f\mapsto\llbracket x\mapsto g(f(x))\rrbracket\rrbracket\oftype[[A,B],[A,C]]}}%
            \infer1[(λ)]{\context{\Gamma}{\llbracket g\mapsto\llbracket f\mapsto\llbracket x\mapsto g(f(x))\rrbracket\rrbracket\rrbracket\oftype[[B,C],[[A,B],[A,C]]]}}%
            \infer1{\context{\Gamma}{\comp_{A,B,C}\doteq\llbracket g\mapsto\llbracket f\mapsto\llbracket x\mapsto g(f(x))\rrbracket\rrbracket\rrbracket\oftype[B,C]\to[[A,B],[A,C]]}}%
        \end{prooftree}%
        .%
    \end{scalewebprooftree}%
\end{definition}
\begin{proposition}{Properties of Composition of Functions}{properties-of-composition-of-functions}%
    Let $A$, $B$, and $C$ be types.
    \begin{enumerate}
        \item\label{properties-of-composition-of-functions-forming-composition}\SloganFont{Forming Composition. }We have
            \begin{webprooftree}%
                \begin{prooftree}%
                    \hypo{\context{\Gamma}{f\oftype A\to B}}%
                    \hypo{\context{\Gamma}{g\oftype B\to C}}%
                    \infer2[(comp)]{\context{\Gamma}{g\circ f\oftype A\to C}}%
                \end{prooftree}%
                .%
            \end{webprooftree}%
        \item\label{properties-of-composition-of-functions-associativity}\SloganFont{Associativity. }We have
            \begin{webprooftree}%
                \begin{prooftree}%
                    \hypo{\context{\Gamma}{f\oftype A\to B}}%
                    \hypo{\context{\Gamma}{g\oftype B\to C}}%
                    \hypo{\context{\Gamma}{h\oftype C\to D}}%
                    \infer3[(ass)]{\context{\Gamma}{(h\circ g)\circ f\doteq h\circ(g\circ f)\oftype A\to D}}%
                \end{prooftree}%
                .%
            \end{webprooftree}%
        \item\label{properties-of-composition-of-functions-left-unitality}\SloganFont{Left Unitality. }We have
            \begin{webprooftree}%
                \begin{prooftree}%
                    \hypo{\context{\Gamma}{f\oftype A\to B}}%
                    \infer1[(LU)]{\context{\Gamma}{\id_{B}\circ f\doteq f\oftype A\to B}}%
                \end{prooftree}%
                .%
            \end{webprooftree}%
        \item\label{properties-of-composition-of-functions-right-unitality}\SloganFont{Right Unitality. }We have
            \begin{webprooftree}%
                \begin{prooftree}%
                    \hypo{\context{\Gamma}{f\oftype A\to B}}%
                    \infer1[(RU)]{\context{\Gamma}{f\circ\id_{A}\doteq f\oftype A\to B}}%
                \end{prooftree}%
                .%
            \end{webprooftree}%
        %\item\label{properties-of-composition-of-functions-}\SloganFont{. }
    \end{enumerate}
\end{proposition}
\begin{Proof}{Proof of \cref{properties-of-composition-of-functions}}%
    \FirstProofBox{\cref{properties-of-composition-of-functions-forming-composition}: Forming Composition}%
    This follows from the definition of $g\circ f\defeq\comp(g)(f)$.

    \ProofBox{\cref{properties-of-composition-of-functions-associativity}: Associativity}%
    Firstly, note that we have
    \begin{webprooftree}%
        \begin{prooftree}%
            \hypo{\context{\Gamma}{f\oftype A\to B}}%
            \hypo{\context{\Gamma}{g\oftype B\to C}}%
            \hypo{\context{\Gamma}{h\oftype C\to D}}%
            \infer2[(comp)]{\context{\Gamma}{h\circ g\oftype B\to D}}%
            \infer2[(comp)]{\context{\Gamma}{(h\circ g)\circ f\oftype A\to D}}%
        \end{prooftree}%
    \end{webprooftree}%
    and
    \begin{webprooftree}%
        \begin{prooftree}%
            \hypo{\context{\Gamma}{f\oftype A\to B}}%
            \hypo{\context{\Gamma}{g\oftype B\to C}}%
            \infer2[(comp)]{\context{\Gamma}{g\circ f\oftype A\to C}}%
            \hypo{\context{\Gamma}{h\oftype C\to D}}%
            \infer2[(comp)]{\context{\Gamma}{h\circ(g\circ f)\oftype A\to D}}%
        \end{prooftree}%
        ,%
    \end{webprooftree}%
    so taking the judgement $\context{\Gamma,\,x\oftype A}{h(g(f(x)))\doteq h(g(f(x)))\oftype D}$ for granted for now, we have
    \begin{scalewebprooftree}%
        \begin{prooftree}%
            \hypo{\context{\Gamma}{(h\circ g)\circ f\oftype A\to D}}%
            \hypo{\context{\Gamma}{h\circ(g\circ f)\oftype A\to D}}%
            \hypo{\context{\Gamma,\,x\oftype A}{h(g(f(x)))\doteq h(g(f(x)))\oftype D}}%
            \hypo{\context{\Gamma,\,x\oftype A}{(h\circ g)(f(x))\doteq h(g(f(x)))\oftype D}}%
            \infer2[(trans)]{\context{\Gamma,\,x\oftype A}{(h\circ g)(f(x))\doteq h(g(f(x)))\oftype D}}
            \hypo{\context{\Gamma,\,x\oftype A}{((h\circ g)\circ f)(x)\doteq(h\circ g)(f(x))\oftype D}}%
            \infer2[(trans)]{\context{\Gamma,\,x\oftype A}{((h\circ g)\circ f)(x)\doteq h(g(f(x)))\oftype D}}
            \hypo{\context{\Gamma,\,x\oftype A}{h(g(f(x)))\doteq h((g\circ f)(x))\oftype D}}%
            \hypo{\context{\Gamma,\,x\oftype A}{h((g\circ f)(x))\doteq(h\circ(g\circ f)(x))\oftype D}}%
            \infer2[(trans)]{\context{\Gamma,\,x\oftype A}{h(g(f(x)))\doteq(h\circ(g\circ f)(x))\oftype D}}
            \infer2[(trans)]{\context{\Gamma,\,x\oftype A}{((h\circ g)\circ f)(x)\doteq(h\circ(g\circ f)(x))\oftype D}}
            \infer3[(FEXT)]{\context{\Gamma}{(h\circ g)\circ f\doteq h\circ(g\circ f)\oftype A\to D}}
        \end{prooftree}%
        .%
    \end{scalewebprooftree}%
    Thus, to prove $(h\circ g)\circ f=h\circ(g\circ f)$, it remains to show $\context{\Gamma,\,x\oftype A}{h(g(f(x)))\doteq h(g(f(x)))\oftype D}$. For this, we have
    \begin{scalewebprooftree}%
        \begin{prooftree}%
            \hypo{\context{\Gamma}{f\oftype A\to B}}%
            \infer1[(ev1)]{\context{\Gamma,\,x\oftype A}{f(x)\oftype B}}%
            \hypo{\context{\Gamma}{g\oftype B\to C}}%
            \infer1[(ev1)]{\context{\Gamma,\,y\oftype B}{g(y)\oftype C}}%
            \infer1[(W)]{\context{\Gamma,\,x\oftype A,\,y\oftype B}{g(y)\oftype C}}%
            \infer2[(S)]{\context{\Gamma,\,x\oftype A}{g(f(x))\oftype C}}%
            \hypo{\context{\Gamma}{h\oftype C\to D}}%
            \infer1[(ev1)]{\context{\Gamma,\,z\oftype C}{h(z)\oftype D}}%
            \infer1[(W)]{\context{\Gamma,\,x\oftype A,\,z\oftype C}{h(z)\oftype D}}%
            \infer2[(S)]{\context{\Gamma,\,x\oftype A}{h(g(f(x)))\oftype D}}%
            \infer1[(refl)]{\context{\Gamma,\,x\oftype A}{h(g(f(x)))\doteq h(g(f(x)))\oftype D}}%
        \end{prooftree}%
        .%
    \end{scalewebprooftree}%
    This finishes the proof.

    \ProofBox{\cref{properties-of-composition-of-functions-left-unitality}: Left Unitality}%
    Firstly, note that it suffices to produce a derivation for the judgement $\context{\Gamma,\,x\oftype A}{\id_{B}(f(x))\doteq f(x)\oftype B}$, as we can then finish that derivation with
    \begin{scalewebprooftree}%
        \begin{prooftree}%
            \hypo{\evdots}%
            \infer1{\context{\Gamma,\,x\oftype A}{\id_{B}(f(x))\doteq f(x)\oftype B}}
            \infer1[(λ-eq)]{\context{\Gamma}{\llbracket x\mapsto\id_{B}(f(x))\rrbracket\doteq\llbracket x\mapsto f(x)\rrbracket\oftype A\to B}}%
            \hypo{\context{\Gamma}{f\oftype A\to B}}%
            \infer1[(η)]{\context{\Gamma}{\llbracket x\mapsto f(x)\rrbracket\doteq f\oftype A\to B}}%
            \infer2[(trans)]{\context{\Gamma}{\id_{B}\circ f\doteq f\oftype A\to B}}%
        \end{prooftree}%
        .%
    \end{scalewebprooftree}%
    Now, for the proof of the judgement, we have
    \begin{webprooftree}%
        \begin{prooftree}%
            \hypo{\context{\Gamma}{f\oftype A\to B}}%
            \infer1[(ev1)]{\context{\Gamma,\,x\oftype A}{f(x)\oftype B}}%
            \hypo{\context{\Gamma}{A\type}}%
            \hypo{\context{\Gamma}{B\type}}%
            \infer1[(id-ev)]{\context{\Gamma,\,y\oftype B}{\id_{B}(y)\doteq y\oftype B}}%
            \infer2[(W)]{\context{\Gamma,\,x\oftype A,\,y\oftype B}{\id_{B}(y)\doteq y\oftype B}}
            \infer2[(S)]{\context{\Gamma,\,x\oftype A}{\id_{B}(f(x))\doteq f(x)\oftype B}}
        \end{prooftree}%
        .%
    \end{webprooftree}%
    This finishes the proof.

    \ProofBox{\cref{properties-of-composition-of-functions-right-unitality}: Right Unitality}%
    Firstly, note that it suffices to produce a derivation for the judgement $\context{\Gamma,\,x\oftype A}{f(\id_{A}(x))\doteq f(x)\oftype B}$, as we can then finish that derivation with
    \begin{scalewebprooftree}%
        \begin{prooftree}%
            \hypo{\evdots}%
            \infer1{\context{\Gamma,\,x\oftype A}{f(\id_{A}(x))\doteq f(x)\oftype B}}
            \infer1[(λ-eq)]{\context{\Gamma}{\llbracket x\mapsto f(\id_{A}(x))\rrbracket\doteq\llbracket x\mapsto f(x)\rrbracket\oftype A\to B}}%
            \hypo{\context{\Gamma}{f\oftype A\to B}}%
            \infer1[(η)]{\context{\Gamma}{\llbracket x\mapsto f(x)\rrbracket\doteq f\oftype A\to B}}%
            \infer2[(trans)]{\context{\Gamma}{\id_{B}\circ f\doteq f\oftype A\to B}}%
        \end{prooftree}%
        .%
    \end{scalewebprooftree}%
    Now, for the proof of the judgement, we have
    \begin{webprooftree}%
        \begin{prooftree}%
            \hypo{\context{\Gamma}{A\type}}%
            \infer1[(id-ev)]{\context{\Gamma,\,x\oftype A}{\id_{A}(x)\doteq x\oftype A}}%
            \hypo{\context{\Gamma}{f\oftype A\to B}}%
            \infer1[(refl)]{\context{\Gamma}{f\doteq f\oftype A\to B}}%
            \infer2[(ev-eq)]{\context{\Gamma,\,x\oftype A}{f(\id_{A}(x))\doteq f(x)\oftype B}}%
        \end{prooftree}%
        .%
    \end{webprooftree}%
    This finishes the proof.
\end{Proof}
\begin{appendices}
\input{ABSOLUTEPATH/chapters2.tex}
\end{appendices}
\end{document}
